<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenKoreanLearningLab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR:wght@400;500;600;700&family=Jua&family=Noto+Sans+KR:wght@400;500;700;900&family=Sunflower:wght@300;500;700&display=swap" rel="stylesheet">
    <link href="https://hangeul.pstatic.net/hangeul_static/css/nanum-square-round.css" rel="stylesheet">
    <style>
        @font-face {
            font-family: 'NanumSquareRound';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_two@1.0/NanumSquareRound.woff') format('woff');
            font-weight: normal;
            font-display: swap;
        }
        body{font-family:'NanumSquareRound',sans-serif;background-color:#f9fafb;color:#334155}
        .font-basic{font-family:'NanumSquareRound',sans-serif}
        .font-jua{font-family:'Jua',sans-serif}
        .font-noto{font-family:'Noto Sans KR',sans-serif}
        .font-sunflower{font-family:'Sunflower',sans-serif}
        .font-nanum-round{font-family:'NanumSquareRound',sans-serif}
        @font-face{font-family:'Cafe24SurroundAir';src:url('https://gcore.jsdelivr.net/gh/projectnoonnu/noonfonts_2105_2@1.0/Cafe24SsurroundAir.woff') format('woff');font-weight:normal;font-display:swap}.font-cafe24{font-family:'Cafe24SurroundAir',sans-serif}@font-face{font-family:'Cafe24Surround';src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2105_2@1.0/Cafe24Ssurround.woff') format('woff');font-weight:normal;font-display:swap}.font-cafe24-surround{font-family:'Cafe24Surround',sans-serif}@font-face{font-family:'Cafe24Decoshadow';src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/2405-3@1.1/Cafe24Decoshadow.woff2') format('woff2');font-weight:normal;font-display:swap}.font-cafe24-deco{font-family:'Cafe24Decoshadow',sans-serif}@font-face{font-family:'Cafe24Decoschool';src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/2405-3@1.1/Cafe24Decoschool.woff2') format('woff2');font-weight:normal;font-display:swap}.font-cafe24-school{font-family:'Cafe24Decoschool',sans-serif}@font-face{font-family:'Cafe24Anemone';src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/Cafe24Ohsquare.woff') format('woff');font-weight:normal;font-display:swap}.font-cafe24-anemone{font-family:'Cafe24Anemone',sans-serif}@font-face{font-family:'SchoolSafetyRoundedSmile';src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/2408-5@1.0/HakgyoansimDunggeunmisoTTF-R.woff2') format('woff2');font-weight:normal;font-display:swap}@font-face{font-family:'SchoolSafetyRoundedSmile';src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/2408-5@1.0/HakgyoansimDunggeunmisoTTF-B.woff2') format('woff2');font-weight:700;font-display:swap}.font-school-smile{font-family:'SchoolSafetyRoundedSmile',sans-serif}@font-face{font-family:'SchoolSafetyFreeTime';src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/2508-2@1.0/HakgyoansimJayusiganR.woff2') format('woff2');font-weight:normal;font-style:normal}.font-school-free{font-family:'SchoolSafetyFreeTime',sans-serif}@font-face{font-family:'Juache';src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_one@1.0/BMJUA.woff') format('woff');font-weight:normal;font-display:swap}.font-juache{font-family:'Juache',sans-serif}@font-face{font-family:'SchoolSafetyOcarina';src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/2511-1@1.0/HakgyoansimOcarinaR.woff2') format('woff2');font-weight:normal;font-display:swap}.font-ocarina{font-family:'SchoolSafetyOcarina',sans-serif}@font-face{font-family:'SchoolSafetyPictureDiary';src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/2408-5@1.0/HakgyoansimGeurimilgiTTF-R.woff2') format('woff2');font-weight:normal;font-display:swap}.font-diary{font-family:'SchoolSafetyPictureDiary',sans-serif}@font-face{font-family:'SchoolSafeBoardMarker';src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/2511-1@1.0/HakgyoansimBoadmarkerR.woff2') format('woff2');font-weight:normal;font-display:swap}.font-marker{font-family:'SchoolSafeBoardMarker',sans-serif}@font-face{font-family:'SchoolSafeDictation';src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/2408-5@1.0/HakgyoansimBadasseugiTTF-L.woff2') format('woff2');font-weight:normal;font-display:swap}.font-dictation{font-family:'SchoolSafeDictation',sans-serif}@font-face{font-family:'Cafe24Gowoonbam';src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_twelve@1.1/Cafe24Oneprettynight.woff') format('woff');font-weight:normal;font-display:swap}.font-gowoonbam{font-family:'Cafe24Gowoonbam',sans-serif}@font-face{font-family:'SchoolSafetyMustache';src:url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2402_keris@1.0/TTHakgyoansimKossuyeomR.woff2') format('woff2');font-weight:normal;font-display:swap}.font-mustache{font-family:'SchoolSafetyMustache',sans-serif}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}::-webkit-scrollbar-thumb:hover{background:#94a3b8}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in{animation:fadeIn 0.3s ease-out forwards}input[type=range]{-webkit-appearance:none;background:transparent}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;height:12px;width:12px;border-radius:50%;background:var(--thumb-color,#22c55e);cursor:pointer;margin-top:-4px;border:1px solid white;box-shadow:0 1px 2px rgba(0,0,0,0.15)}input[type=range]::-webkit-slider-runnable-track{width:100%;height:4px;cursor:pointer;background:#e2e8f0;border-radius:2px}
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo, useCallback } = React;
        const { createPortal } = ReactDOM;

        // --- Constants for Styles ---
        const BASE_CLAMP = "clamp(12px, 1vw, 16px)";
        const SCALE_SIDEBAR_EXPANDED = 1.15;
        const SCALE_SIDEBAR_COLLAPSED = 1.0;
        const SCALE_PAGE_HOME = 1.25;
        const SCALE_PAGE_LEARN_SCRIPT = 1.3;
        const SCALE_PAGE_VOCAB = 1.4;
        const SCALE_PAGE_QUIZ = 1.55;
        const SCALE_PAGE_DISCUSS = 1.35;
        const SCALE_HEADER_LEARN = 1.0;
        const SCALE_HEADER_DEFAULT = 1.3;

        // Sidebar Width Calculation (Base w-64 is 16rem = 256px)
        const SIDEBAR_WIDTH_EXPANDED_PX = 256 * 1.15; // ~295px
        const SIDEBAR_WIDTH_COLLAPSED_PX = 88; // w-[88px]

        // --- Data Definitions ---
        const LEVEL_DEFINITIONS = {
            "A1": { title: "Novice", desc: "Can use and understand very simple everyday expressions. Can introduce themselves, ask and answer basic questions." },
            "A1+": { title: "Pre-Beginner", desc: "Still beginner, but can handle slightly more than A1." },
            "A2": { title: "Beginner", desc: "Can understand frequently used sentences (family, shopping, work, hobbies)." },
            "A2+": { title: "Upper Beginner", desc: "Between A2 and B1. Can speak a bit more smoothly about daily life." },
            "B1": { title: "Pre-Intermediate", desc: "Can understand the main points of clear standard speech or texts on familiar topics." },
            "B1+": { title: "Lower Intermediate", desc: "Stronger B1. More comfortable carrying conversations." },
            "B2": { title: "Intermediate", desc: "Can understand the main ideas of complex texts." },
            "B2+": { title: "Upper Intermediate", desc: "Near C1. Can argue a point logically." },
            "C1": { title: "Advanced", desc: "Can understand long, demanding texts and implied meanings." },
            "C1+": { title: "Upper Advanced", desc: "Very strong C1, approaching native-like flexibility." },
            "C2": { title: "Proficient", desc: "Can understand virtually everything heard or read." }
        };

        const VOCAB_DATA = [
            { term: 'ì´ ì£¼ì œë¡œ ì´ì•¼ê¸°í•´ ë´ìš”', mainDef: "Let's Talk About This Topic", examples: [{ kor: "ìš°ë¦¬ ì´ ì£¼ì œë¡œ ì´ì•¼ê¸°í•´ìš”.", eng: "Let's talk about this topic." }, { kor: "ë‹¤ìŒì—ëŠ” ë‹¤ë¥¸ ì£¼ì œë¡œ ì´ì•¼ê¸°í•´ ë´ìš”.", eng: "Let's talk about a different topic next time." }], subDefs: [{ subTerm: 'â–¢â–¢ì„/ë¥¼ ì£¼ì œë¡œ ì´ì•¼ê¸°í•˜ë‹¤', subDef: 'to talk about [something] as a topic' }, { subTerm: '-ì•„/ì–´ ë³´ë‹¤', subDef: 'used to make gentle suggestions without sounding pushy' }] },
            { term: 'ì™¼ì†ì¡ì´', mainDef: 'left-handed person', examples: [{ kor: "ì œ ë™ìƒì€ ì™¼ì†ì¡ì´ì˜ˆìš”.", eng: "My younger sibling is left-handed." }, { kor: "ì €ëŠ” ì™¼ì†ì¡ì´ê°€ ì•„ë‹ˆì—ìš”.", eng: "I am not left-handed." }] },
            { term: 'ì™¼ì†ì„ ìì£¼ ì“°ëŠ” ì‚¬ëŒ', mainDef: 'a person who frequently uses their left hand', examples: [{ kor: "ê·¸ ì‚¬ëŒì€ ì™¼ì†ì„ ìì£¼ ì¨ìš”.", eng: "That person uses their left hand often." }, { kor: "ì €ëŠ” ì˜¤ë¥¸ì†ì„ ë” ìì£¼ ì¨ìš”.", eng: "I use my right hand more often." }], subDefs: [{ subTerm: '-ëŠ” ì‚¬ëŒ', subDef: '"a person who..."; used to describe a person who does a certain action' }] },
            { term: 'ì´ë¼ëŠ” ëœ»', mainDef: 'meaning that / which means', examples: [{ kor: "'ì¹œêµ¬'ë¼ëŠ” ëœ»ì€ 'friend'ì˜ˆìš”.", eng: "The meaning of 'chingu' is 'friend'." }, { kor: "ì´ ë‹¨ì–´ëŠ” ì¢‹ì€ ëœ»ì´ì—ìš”.", eng: "This word has a good meaning." }] },
            { term: 'ì˜¤ë¥¸ì†ì¡ì´', mainDef: 'right-handed person', examples: [{ kor: "ì €ëŠ” ì˜¤ë¥¸ì†ì¡ì´ì˜ˆìš”.", eng: "I am right-handed." }, { kor: "ìš°ë¦¬ ê°€ì¡±ì€ ëª¨ë‘ ì˜¤ë¥¸ì†ì¡ì´ì˜ˆìš”.", eng: "Everyone in my family is right-handed." }] },
            { term: 'ì˜¤ë¥¸ì†ì„ ìì£¼ ì“°ëŠ” ì‚¬ëŒ', mainDef: 'a person who frequently uses their right hand', examples: [{ kor: "ëŒ€ë¶€ë¶„ ì‚¬ëŒì€ ì˜¤ë¥¸ì†ì„ ì¨ìš”.", eng: "Most people use their right hand." }, { kor: "ì €ëŠ” ë°¥ì„ ë¨¹ì„ ë•Œ ì˜¤ë¥¸ì†ì„ ì¨ìš”.", eng: "I use my right hand when I eat." }], subDefs: [{ subTerm: '-ëŠ” ì‚¬ëŒ', subDef: '"a person who..."; used to describe a person who does a certain action' }] },
            { term: 'ì „ ì„¸ê³„ì—ì„œ', mainDef: 'around the world / worldwide', examples: [{ kor: "ì „ ì„¸ê³„ì—ì„œ í•œêµ­ì´ ìœ ëª…í•´ìš”.", eng: "Korea is famous around the world." }, { kor: "ì „ ì„¸ê³„ì— ì‚¬ëŒë“¤ì´ ë§ì•„ìš”.", eng: "There are many people in the world." }] },
            { term: 'ë¼ê³  í•´ìš”', mainDef: 'they say / it is said', examples: [{ kor: "ì‚¬ëŒë“¤ì´ ì €ë¥¼ í•™ìƒì´ë¼ê³  í•´ìš”.", eng: "People say I am a student." }, { kor: "ë‚´ì¼ ë‚ ì”¨ê°€ ì¢‹ë‹¤ê³  í•´ìš”.", eng: "They say the weather will be good tomorrow." }] },
            { term: 'í—', mainDef: 'Whoa / Oh my (exclamation of surprise)', examples: [{ kor: "í—, ì •ë§ ë¹„ì‹¸ìš”!", eng: "Whoa, it's really expensive!" }, { kor: "í—, ê·¸ê±° ì§„ì§œì˜ˆìš”?", eng: "Oh my, is that real?" }] },
            { term: '10ëª… ì¤‘ì— 1ëª…ì´ë„¤ìš”', mainDef: "That's 1 out of 10 people", examples: [{ kor: "ìš°ë¦¬ ë°˜ì€ 10ëª… ì¤‘ì— 8ëª…ì´ ì—¬ìì˜ˆìš”.", eng: "In our class, 8 out of 10 people are women." }, { kor: "ì´ ì‚¬ê³¼ë“¤ ì¤‘ì— í•˜ë‚˜ëŠ” ë§›ì´ ì—†ì–´ìš”.", eng: "One of these apples doesn't taste good." }], subDefs: [{ subTerm: 'ì¤‘ì—', subDef: '"among" or "out of"; used to indicate selection from a group' }, { subTerm: '-ë„¤ìš”', subDef: 'sentence ending expressing surprise or realization' }] },
            { term: 'ìƒê°ë³´ë‹¤ ë§ì£ .', mainDef: "That's more than expected, right? / That's quite a lot, isn't it?", examples: [{ kor: "ìˆ™ì œê°€ ìƒê°ë³´ë‹¤ ë§ì•„ìš”.", eng: "There is more homework than I thought." }, { kor: "í•œêµ­ì–´ ê³µë¶€ëŠ” ìƒê°ë³´ë‹¤ ì¬ë¯¸ìˆì–´ìš”.", eng: "Studying Korean is more fun than I thought." }], subDefs: [{ subTerm: '-ë³´ë‹¤', subDef: '"than"; used for comparison' }, { subTerm: '-ì£ ', subDef: 'informal sentence ending used for confirmation or emphasis' }] },
            { term: 'ì™¼ì†ì¡ì´ì— ëŒ€í•œ í¸ê²¬', mainDef: 'prejudice about left-handed people', examples: [{ kor: "ê·¸ê²ƒì€ ë‚˜ìœ í¸ê²¬ì´ì—ìš”.", eng: "That is a bad prejudice." }, { kor: "ìš°ë¦¬ëŠ” í¸ê²¬ì´ ì—†ì–´ìš”.", eng: "We don't have prejudice." }], subDefs: [{ subTerm: '-ì— ëŒ€í•œ', subDef: '"about" or "regarding"; used to indicate the topic or subject matter' }, { subTerm: 'í¸ê²¬', subDef: 'prejudice, bias' }] },
            { term: 'í¸ê²¬', mainDef: 'prejudice, bias', examples: [{ kor: "ê·¸ ì‚¬ëŒì€ í¸ê²¬ì´ ì‹¬í•´ìš”.", eng: "That person is very prejudiced." }, { kor: "í¸ê²¬ì€ ì¢‹ì§€ ì•Šì•„ìš”.", eng: "Prejudice is not good." }] },
            { term: 'ì˜ëª» ìƒê°í•˜ëŠ” ê²ƒ', mainDef: 'thinking wrongly / misconception', examples: [{ kor: "ê·¸ê²ƒì€ ì˜ëª»ëœ ìƒê°ì´ì—ìš”.", eng: "That is a wrong thought." }, { kor: "ì €ëŠ” ê°€ë” ì˜ëª» ìƒê°í•´ìš”.", eng: "I sometimes think wrongly." }], subDefs: [{ subTerm: 'ì˜ëª»', subDef: 'wrongly, incorrectly' }, { subTerm: 'ìƒê°í•˜ë‹¤', subDef: 'to think' }, { subTerm: '-ëŠ” ê²ƒ', subDef: 'used to nominalize verbs by turning a verb into a noun phrase meaning "the act of â€¦," "the fact of â€¦," or "the thing that â€¦"' }] },
            { term: 'ì´ë¼ëŠ” ëœ»ì´ì—ìš”', mainDef: 'it means that / the meaning is', examples: [{ kor: "ì´ê²ƒì€ 'ì‚¬ë‘'ì´ë¼ëŠ” ëœ»ì´ì—ìš”.", eng: "This means 'love'." }, { kor: "ê·¸ ë§ì€ ì¢‹ì€ ëœ»ì´ ì•„ë‹ˆì—ìš”.", eng: "That word doesn't have a good meaning." }] },
            { term: 'ì°½ì˜ì ', mainDef: 'creative', examples: [{ kor: "ì œ ì¹œêµ¬ëŠ” ì•„ì£¼ ì°½ì˜ì ì´ì—ìš”.", eng: "My friend is very creative." }, { kor: "ì´ ê·¸ë¦¼ì€ ì •ë§ ì°½ì˜ì ì´ì—ìš”.", eng: "This picture is really creative." }] },
            { term: 'ë¼ê³  ìƒê°í•´ìš”', mainDef: 'I think that / I believe that', examples: [{ kor: "ì €ëŠ” í•œêµ­ ìŒì‹ì´ ë§›ìˆë‹¤ê³  ìƒê°í•´ìš”.", eng: "I think Korean food is delicious." }, { kor: "ê·¸ ì˜í™”ê°€ ì¬ë¯¸ìˆë‹¤ê³  ìƒê°í•´ìš”.", eng: "I think that movie is fun." }] },
            { term: 'ì™„ì „íˆ ìƒˆë¡œìš´ ê²ƒ', mainDef: 'something completely new', examples: [{ kor: "ì´ê²ƒì€ ì™„ì „íˆ ìƒˆë¡œìš´ ë””ìì¸ì´ì—ìš”.", eng: "This is a completely new design." }, { kor: "ì €ëŠ” ì™„ì „íˆ ìƒˆë¡œìš´ ê²ƒì„ ì›í•´ìš”.", eng: "I want something completely new." }], subDefs: [{ subTerm: '-ã„´ ê²ƒ', subDef: 'used to nominalize descriptive verbs (adjectives) by turning them into a noun phrase meaning "the thing that is â€¦" or "something that is â€¦"' }] },
            { term: 'ë¼ëŠ” ëœ»ì´ì—ìš”', mainDef: 'it means that / the meaning is', examples: [{ kor: "ì´ê²ƒì€ 'í¬ë§'ì´ë¼ëŠ” ëœ»ì´ì—ìš”.", eng: "This means 'hope'." }, { kor: "ê·¸ê²ƒì€ 'ê°€ì¡±'ì´ë¼ëŠ” ëœ»ì´ì—ìš”.", eng: "That means 'family'." }] },
            { term: 'ì˜ˆìˆ ê°€', mainDef: 'artist', examples: [{ kor: "í”¼ì¹´ì†ŒëŠ” ìœ ëª…í•œ ì˜ˆìˆ ê°€ì˜€ì–´ìš”.", eng: "Picasso was a famous artist." }, { kor: "ì œ ê¿ˆì€ ì˜ˆìˆ ê°€ì˜ˆìš”.", eng: "My dream is to be an artist." }] },
            { term: 'ì¼ë°˜í™”', mainDef: 'generalization', examples: [{ kor: "ê·¸ê²ƒì€ ë‚˜ìœ ì¼ë°˜í™”ì˜ˆìš”.", eng: "That is a bad generalization." }, { kor: "ì¼ë°˜í™”ëŠ” ìœ„í—˜í•´ìš”.", eng: "Generalization is dangerous." }] },
            { term: 'í•˜ë‚˜ë¥¼ ë³´ê³  ëª¨ë‘ ê·¸ë ‡ë‹¤ê³  ìƒê°í•˜ë‹¤', mainDef: 'to see one thing and think everyone/everything is like that', examples: [{ kor: "í•œ ì‚¬ëŒë§Œ ë³´ê³  ëª¨ë‘ë¥¼ ì•Œ ìˆ˜ ì—†ì–´ìš”.", eng: "You can't know everyone by looking at just one person." }, { kor: "ë‚˜ìœ ì¼ë°˜í™”ë¥¼ í•˜ì§€ ë§ˆì„¸ìš”.", eng: "Don't make bad generalizations." }], subDefs: [{ subTerm: 'ë³´ë‹¤', subDef: 'to see, to look at' }, { subTerm: '-ê³ ', subDef: 'used to connect two verbs, meaning "and then" or simply "and," to show actions happening in sequence' }, { subTerm: 'ê·¸ë ‡ë‹¤ê³  ìƒê°í•˜ë‹¤', subDef: 'to think that it is so / to think that way' }] },
            { term: 'ìš°ì—°', mainDef: 'coincidence, chance', examples: [{ kor: "ìš°ë¦¬ëŠ” ì¹´í˜ì—ì„œ ìš°ì—°íˆ ë§Œë‚¬ì–´ìš”.", eng: "We met by chance at the cafe." }, { kor: "ì´ê²ƒì€ ê·¸ëƒ¥ ìš°ì—°ì´ì—ìš”.", eng: "This is just a coincidence." }] },
            { term: 'ê³„íší•˜ì§€ ì•Šì€ ì¼', mainDef: "unplanned event / something that wasn't planned", examples: [{ kor: "ì´ ì—¬í–‰ì€ ê³„íší•˜ì§€ ì•Šì€ ì¼ì´ì—ˆì–´ìš”.", eng: "This trip was an unplanned event." }, { kor: "ê°€ë” ê³„íší•˜ì§€ ì•Šì€ ì¼ì´ ë” ì¬ë¯¸ìˆì–´ìš”.", eng: "Sometimes unplanned things are more fun." }], subDefs: [{ subTerm: 'ê³„íší•˜ë‹¤', subDef: 'to plan' }, { subTerm: '-ì§€ ì•Šë‹¤', subDef: '"not..."; used to make negative statements' }, { subTerm: '-ã„´/ì€ ì¼', subDef: '"a thing/matter that..."; used to turn a past-tense verb into a noun phrase describing an event or situation' }] },
            { term: 'ê³¼í•™ ìˆ˜ì—…', mainDef: 'science class', examples: [{ kor: "ì˜¤ëŠ˜ ê³¼í•™ ìˆ˜ì—…ì´ ì¬ë¯¸ìˆì—ˆì–´ìš”.", eng: "Science class was fun today." }, { kor: "ì €ëŠ” ê³¼í•™ ìˆ˜ì—…ì„ ì¢‹ì•„í•´ìš”.", eng: "I like science class." }], subDefs: [{ subTerm: 'ê³¼í•™', subDef: 'science' }] },
            { term: 'ì˜¤ë¥¸ìª½ ë‡Œë¥¼ ë§ì´ ì¨ì„œ', mainDef: 'because they use the right side of the brain a lot', examples: [{ kor: "ì €ëŠ” ë¨¸ë¦¬ë¥¼ ë§ì´ ì¨ì„œ í”¼ê³¤í•´ìš”.", eng: "I'm tired because I used my brain a lot." }, { kor: "ì—´ì‹¬íˆ ê³µë¶€í•´ì„œ ì‹œí—˜ì„ ì˜ ë´¤ì–´ìš”.", eng: "I studied hard, so I did well on the test." }], subDefs: [{ subTerm: 'ë‡Œë¥¼ ì“°ë‹¤', subDef: 'to use the brain' }, { subTerm: '-ì•„ì„œ/ì–´ì„œ', subDef: 'used to connect clauses indicating cause or reason ("becauseâ€¦")' }] },
            { term: 'ìµœê·¼ì—', mainDef: 'recently', examples: [{ kor: "ìµœê·¼ì— ì˜í™”ë¥¼ ë´¤ì–´ìš”.", eng: "I saw a movie recently." }, { kor: "ìµœê·¼ì— ë‚ ì”¨ê°€ ì•„ì£¼ ë”ì›Œìš”.", eng: "The weather is very hot recently." }] },
            { term: 'ë‡Œê³¼í•™ìë“¤', mainDef: 'brain scientists, neuroscientists', examples: [{ kor: "ê·¸ ì‚¬ëŒì€ ë‡Œê³¼í•™ìì˜ˆìš”.", eng: "That person is a neuroscientist." }, { kor: "ë‡Œê³¼í•™ìë“¤ì€ ë‡Œë¥¼ ì—°êµ¬í•´ìš”.", eng: "Neuroscientists study the brain." }] },
            { term: 'ì£¼ì¥', mainDef: 'claim, argument', examples: [{ kor: "ê·¸ ì‚¬ëŒì˜ ì£¼ì¥ì€ ì´ìƒí•´ìš”.", eng: "That person's claim is strange." }, { kor: "ì´ê²ƒì€ ì €ì˜ ì£¼ì¥ì´ì—ìš”.", eng: "This is my claim." }] },
            { term: 'ì•„ë‹ˆë¼ê³  ë§í•´ìš”', mainDef: "say it's not true / say that's not the case", examples: [{ kor: "ì €ëŠ” í•™ìƒì´ ì•„ë‹ˆë¼ê³  ë§í–ˆì–´ìš”.", eng: "I said I am not a student." }, { kor: "ì¹œêµ¬ê°€ ê´œì°®ë‹¤ê³  ë§í•´ìš”.", eng: "My friend says it's okay." }] },
            { term: 'ì°½ì˜ì ì¸ ì¼ì„ í•  ë•Œ', mainDef: 'when doing creative work', examples: [{ kor: "ì €ëŠ” ì°½ì˜ì ì¸ ì¼ì„ ì¢‹ì•„í•´ìš”.", eng: "I like creative work." }, { kor: "ì´ ì¼ì€ ì•„ì£¼ ì°½ì˜ì ì´ì—ìš”.", eng: "This work is very creative." }], subDefs: [{ subTerm: 'ì°½ì˜ì ì´ë‹¤', subDef: 'to be creative' }, { subTerm: '-ã„´ì¼', subDef: '"work/task that is..."; used to turn a descriptive verb into a noun phrase describing work or tasks' }, { subTerm: '-ã„¹ ë•Œ', subDef: '"when..."; used to indicate the time when an action occurs' }] },
            { term: 'ë‡Œ', mainDef: 'brain', examples: [{ kor: "ë‡ŒëŠ” ì•„ì£¼ ì¤‘ìš”í•´ìš”.", eng: "The brain is very important." }, { kor: "ì‚¬ëŒì€ ë‡Œë¡œ ìƒê°í•´ìš”.", eng: "People think with their brains." }] },
            { term: 'ì‹¤ìˆ˜', mainDef: 'mistake, error', examples: [{ kor: "ì €ëŠ” ê°€ë” ì‹¤ìˆ˜ë¥¼ í•´ìš”.", eng: "I sometimes make mistakes." }, { kor: "ê´œì°®ì•„ìš”. ê·¸ê±´ ì‘ì€ ì‹¤ìˆ˜ì˜ˆìš”.", eng: "It's okay. That's a small mistake." }] },
            { term: 'ë°˜ì ˆ', mainDef: 'half', examples: [{ kor: "ì‚¬ê³¼ ë°˜ì ˆë§Œ ì£¼ì„¸ìš”.", eng: "Please give me only half an apple." }, { kor: "ìˆ˜ì—…ì´ ë²Œì¨ ë°˜ì ˆ ì§€ë‚¬ì–´ìš”.", eng: "Half of the class has already passed." }] },
            { term: 'ì˜¤í•´', mainDef: 'misunderstanding', examples: [{ kor: "ë¯¸ì•ˆí•´ìš”. ê·¸ê±´ ì œ ì˜¤í•´ì˜€ì–´ìš”.", eng: "I'm sorry. That was my misunderstanding." }, { kor: "ìš°ë¦¬ ì‚¬ì´ì— ì˜¤í•´ëŠ” ì—†ì–´ìš”.", eng: "There are no misunderstandings between us." }] },
            { term: 'ë¬´ìŠ¨ ë§ì´ì—ìš”?', mainDef: 'What do you mean?', examples: [{ kor: "ì§€ê¸ˆ ë¬´ìŠ¨ ë§ì´ì—ìš”?", eng: "What are you talking about right now?" }, { kor: "ê·¸ê²Œ ë¬´ìŠ¨ ë§ì´ì—ìš”? ì˜ ëª¨ë¥´ê² ì–´ìš”.", eng: "What does that mean? I don't understand." }] },
            { term: 'ì´ëŸ° ë¬¼ê±´ë“¤', mainDef: 'these objects/things', examples: [{ kor: "ì €ëŠ” ì´ëŸ° ë¬¼ê±´ë“¤ì„ ì¢‹ì•„í•´ìš”.", eng: "I like things like this." }, { kor: "ì´ëŸ° ë¬¼ê±´ë“¤ì€ ì–´ë””ì— ìˆì–´ìš”?", eng: "Where are things like this?" }], subDefs: [{ subTerm: 'ì´ëŸ°', subDef: '"like this" or "this kind of"; demonstrative adjective' }, { subTerm: 'ë¬¼ê±´ë“¤', subDef: 'things, objects (plural)' }] },
            { term: 'ì˜¤ë¥¸ì†ì¡ì´ë¥¼ ìœ„í•´ ë§Œë“¤ì–´ì¡Œì–´ìš”', mainDef: 'were made for right-handed people', examples: [{ kor: "ì´ ì˜ìëŠ” ì•„ì´ë“¤ì„ ìœ„í•´ ë§Œë“¤ì—ˆì–´ìš”.", eng: "This chair was made for children." }, { kor: "ì´ ìŒì‹ì€ ë‹¹ì‹ ì„ ìœ„í•´ ì¤€ë¹„í–ˆì–´ìš”.", eng: "I prepared this food for you." }], subDefs: [{ subTerm: '-ì„/ë¥¼ ìœ„í•´ verb', subDef: '"for the sake of..." or "for..."; used with verbs to express purpose or benefit' }, { subTerm: '-ì§€ë‹¤', subDef: 'passive voice suffix; used to form passive verbs meaning "to be [verb]ed"' }] },
            { term: 'ë¶ˆí¸í•˜ê² ë„¤ìš”', mainDef: 'That must be uncomfortable', examples: [{ kor: "ë‹¤ë¦¬ê°€ ì•„íŒŒì„œ ë¶ˆí¸í•˜ê² ë„¤ìš”.", eng: "It must be uncomfortable because your leg hurts." }, { kor: "ê·¸ ì‹ ë°œì€ ì •ë§ ë¶ˆí¸í•˜ê² ì–´ìš”.", eng: "Those shoes must be really uncomfortable." }], subDefs: [{ subTerm: 'ë¶ˆí¸í•˜ë‹¤', subDef: 'to be uncomfortable, inconvenient' }, { subTerm: '-ê² ë„¤ìš”', subDef: 'used to show an immediate reaction, realization, or empathy, often translated as "I guess â€¦ / That must be â€¦ / Sounds â€¦"' }] },
            { term: 'í™˜ê²½', mainDef: 'environment', examples: [{ kor: "ê³µê¸°ê°€ ì¢‹ì€ í™˜ê²½ì—ì„œ ì‚´ê³  ì‹¶ì–´ìš”.", eng: "I want to live in an environment with good air." }, { kor: "ì´ê³³ì€ í™˜ê²½ì´ ì•„ì£¼ ê¹¨ë—í•´ìš”.", eng: "The environment here is very clean." }] },
            { term: 'ì£¼ë³€ ìƒí™©', mainDef: 'surrounding situation/circumstances', examples: [{ kor: "ì£¼ë³€ ìƒí™©ì´ ì¡°ìš©í•´ìš”.", eng: "The surrounding situation is quiet." }, { kor: "ì €ëŠ” ì£¼ë³€ ìƒí™©ì„ ì˜ ëª°ë¼ìš”.", eng: "I don't know the surrounding situation well." }], subDefs: [{ subTerm: 'ì£¼ë³€', subDef: 'surroundings, vicinity' }, { subTerm: 'ìƒí™©', subDef: 'situation, circumstances' }] },
            { term: 'ë¶ˆí¸í•˜ë‹ˆê¹Œ', mainDef: "because it's uncomfortable", examples: [{ kor: "ëª¸ì´ ë¶ˆí¸í•˜ë‹ˆê¹Œ ë³‘ì›ì— ê°€ìš”.", eng: "I'm going to the hospital because I feel unwell." }, { kor: "ìë¦¬ê°€ ë¶ˆí¸í•˜ë‹ˆê¹Œ ì¼ì–´ë‚¬ì–´ìš”.", eng: "I stood up because the seat was uncomfortable." }], subDefs: [{ subTerm: 'ë¶ˆí¸í•˜ë‹¤', subDef: 'to be uncomfortable, inconvenient' }, { subTerm: '-ë‹ˆê¹Œ', subDef: '"because" or "since"; used to state a reason or cause' }] },
            { term: 'ê³ ì³ì•¼ í•´ìš”', mainDef: 'should fix/correct / have to fix', examples: [{ kor: "ì˜ìê°€ ê³ ì¥ ë‚˜ì„œ ê³ ì³ì•¼ í•´ìš”.", eng: "The chair is broken, so I have to fix it." }, { kor: "ì €ëŠ” ë‚˜ìœ ìŠµê´€ì„ ê³ ì³ì•¼ í•´ìš”.", eng: "I have to fix my bad habits." }], subDefs: [{ subTerm: 'ì™¼ì†ì¡ì´ë¥¼ ê³ ì¹˜ë‹¤', subDef: 'to fix/correct left-handedness (misconception that it needs to be "fixed")' }, { subTerm: '-ì•¼ í•˜ë‹¤', subDef: '"have toâ€¦" or "mustâ€¦"; used to express necessity or obligation' }] },
            { term: 'ì˜ëª»ëœ ê²Œ ì•„ë‹ˆì—ìš”.', mainDef: "It's not something wrong / There's nothing wrong with it", examples: [{ kor: "ê·¸ê²ƒì€ ì˜ëª»ëœ ê²Œ ì•„ë‹ˆì—ìš”.", eng: "That's not wrong." }, { kor: "ëŠ¦ê²Œ ì˜¨ ê²ƒì€ ì˜ëª»ëœ ê²Œ ì•„ë‹ˆì—ìš”.", eng: "Coming late is not a wrong thing." }], subDefs: [{ subTerm: 'ì˜ëª»ë˜ë‹¤', subDef: 'to be wrong, to go wrong' }, { subTerm: '-ã„´ ê²ƒ', subDef: 'used to nominalize verbs by turning a verb into a noun phrase meaning "the act of â€¦," "the fact of â€¦," or "the thing that â€¦"' }] },
            { term: 'ì˜¤íˆë ¤', mainDef: 'rather, on the contrary', examples: [{ kor: "ë¹„ê°€ ì™€ìš”. ì˜¤íˆë ¤ ì‹œì›í•˜ê³  ì¢‹ì•„ìš”.", eng: "It's raining. On the contrary, it's cool and nice." }, { kor: "ê·¸ ì•½ì€ íš¨ê³¼ê°€ ì—†ì–´ìš”. ì˜¤íˆë ¤ ë” ì•„íŒŒìš”.", eng: "That medicine has no effect. Rather, I feel sicker." }] },
            { term: 'ì™¼ì†ì¡ì´ë¥¼ ìœ„í•œ ë¬¼ê±´', mainDef: 'objects/things for left-handed people', examples: [{ kor: "ì´ê²ƒì€ ì•„ì´ë“¤ì„ ìœ„í•œ ì±…ì´ì—ìš”.", eng: "This is a book for children." }, { kor: "ì—¬ê¸°ëŠ” ë…¸ì¸ë“¤ì„ ìœ„í•œ ì¥ì†Œì˜ˆìš”.", eng: "This is a place for the elderly." }], subDefs: [{ subTerm: '-ì„/ë¥¼ ìœ„í•œ noun', subDef: '"for..." or "for the sake of..."; used with nouns to express purpose or benefit' }, { subTerm: 'ë¬¼ê±´', subDef: 'thing, object' }] },
            { term: 'ì¥ì ', mainDef: 'advantage, strength, merit', examples: [{ kor: "ì´ ì°¨ì˜ ì¥ì ì€ ì•„ì£¼ ë¹¨ë¼ìš”.", eng: "The advantage of this car is that it's very fast." }, { kor: "ì„±ì‹¤í•œ ê²ƒì´ ì €ì˜ ì¥ì ì´ì—ìš”.", eng: "Being diligent is my strength." }] },
            { term: 'ì•„ë¬´ ê²ƒë„ ì—†ì–´ìš”?', mainDef: 'Isn\'t there anything? / Are there no advantages at all?', examples: [{ kor: "ê°€ë°© ì•ˆì— ì•„ë¬´ ê²ƒë„ ì—†ì–´ìš”.", eng: "There is nothing in the bag." }, { kor: "ëƒ‰ì¥ê³ ì— ë¨¹ì„ ê²ƒì´ ì•„ë¬´ ê²ƒë„ ì—†ì–´ìš”.", eng: "There is nothing to eat in the refrigerator." }], subDefs: [{ subTerm: 'ì•„ë¬´ ê²ƒ', subDef: 'anything, nothing (when used with negative)' }] },
            { term: 'ìœ ë¦¬í•˜ë‹¤', mainDef: 'advantageous, beneficial', examples: [{ kor: "í‚¤ê°€ í¬ë©´ ë†êµ¬ì— ìœ ë¦¬í•´ìš”.", eng: "Being tall is advantageous for basketball." }, { kor: "ì´ ì¡°ê±´ì€ ìš°ë¦¬ì—ê²Œ ìœ ë¦¬í•´ìš”.", eng: "These conditions are advantageous to us." }] },
            { term: 'ì—°ìŠµì„ í•´ìš”', mainDef: 'practice / do practice', examples: [{ kor: "ë§¤ì¼ í”¼ì•„ë…¸ ì—°ìŠµì„ í•´ìš”.", eng: "I practice piano every day." }, { kor: "í•œêµ­ì–´ ë§í•˜ê¸° ì—°ìŠµì„ í•´ìš”.", eng: "I practice speaking Korean." }] },
            { term: 'ìµìˆ™í•˜ì§€ ì•Šì•„ìš”', mainDef: 'not familiar with / not used to', examples: [{ kor: "ì €ëŠ” ì•„ì§ í•œêµ­ ìƒí™œì— ìµìˆ™í•˜ì§€ ì•Šì•„ìš”.", eng: "I'm not used to life in Korea yet." }, { kor: "ì €ëŠ” ë§¤ìš´ ìŒì‹ì´ ìµìˆ™í•˜ì§€ ì•Šì•„ìš”.", eng: "I am not used to spicy food." }] },
            { term: 'ìµìˆ™í•˜ë‹¤', mainDef: 'familiar, accustomed to', examples: [{ kor: "ì´ì œëŠ” ê¹€ì¹˜ê°€ ìµìˆ™í•´ìš”.", eng: "I'm used to kimchi now." }, { kor: "ì €ëŠ” ì´ ë™ë„¤ì— ì•„ì£¼ ìµìˆ™í•´ìš”.", eng: "I am very familiar with this neighborhood." }] },
            { term: 'ìì£¼ ê²½í—˜í•´ì„œ ì˜ ì•Œë‹¤', mainDef: 'to know well because of frequent experience', examples: [{ kor: "ì €ëŠ” ì´ ì¼ì„ ìì£¼ í•´ì„œ ì˜ ì•Œì•„ìš”.", eng: "I do this work often, so I know it well." }, { kor: "ê·¸ ì‹ë‹¹ì€ ìì£¼ ê°€ì„œ ì˜ ì•Œì•„ìš”.", eng: "I go to that restaurant often, so I know it well." }], subDefs: [{ subTerm: 'ê²½í—˜í•˜ë‹¤', subDef: 'to experience' }, { subTerm: '-ì•„ì„œ/ì–´ì„œ', subDef: 'used to connect clauses indicating cause or reason ("becauseâ€¦")' }, { subTerm: 'ì•Œë‹¤', subDef: 'to know' }] },
            { term: 'ì˜¤ëŠ˜ë¶€í„°', mainDef: 'from today', examples: [{ kor: "ì˜¤ëŠ˜ë¶€í„° ìš´ë™ì„ ì‹œì‘í•  ê±°ì˜ˆìš”.", eng: "I will start exercising from today." }, { kor: "ì˜¤ëŠ˜ë¶€í„° ìš°ë¦¬ëŠ” ì¹œêµ¬ì˜ˆìš”.", eng: "From today, we are friends." }] },
            { term: 'ê·¸ ì „ì—', mainDef: 'before that', examples: [{ kor: "ìˆ˜ì—… ì‹œì‘ ì „ì— ì»¤í”¼ë¥¼ ë§ˆì…¨ì–´ìš”.", eng: "I drank coffee before class started." }, { kor: "ìê¸° ì „ì— ì±…ì„ ì½ì–´ìš”.", eng: "I read a book before sleeping." }] },
            { term: 'ì˜¤ëŠ˜ ë°°ìš´ ë‹¨ì–´', mainDef: 'learned words/vocabulary', examples: [{ kor: "ì˜¤ëŠ˜ ë°°ìš´ ë‹¨ì–´ë¥¼ ë³µìŠµí•´ìš”.", eng: "I'm reviewing the words I learned today." }, { kor: "ì˜¤ëŠ˜ ë°°ìš´ ë…¸ë˜ë¥¼ ë‹¤ì‹œ ë“¤ì–´ìš”.", eng: "I'm listening again to the song I learned today." }], subDefs: [{ subTerm: 'ë°°ìš°ë‹¤', subDef: 'to learn' }, { subTerm: '-ã„´/ì€', subDef: 'used to turn a past-tense verb into an "adjective-ish" phrase that describes the following noun' }, { subTerm: 'ë‹¨ì–´', subDef: 'word, vocabulary' }] },
            { term: 'ì •ë¦¬í•´ ë³¼ê¹Œìš”?', mainDef: 'Shall we summarize?', examples: [{ kor: "ì±…ìƒì„ ì •ë¦¬í•´ ë³¼ê¹Œìš”?", eng: "Shall we organize the desk?" }, { kor: "ìš°ë¦¬ ìƒê°ì„ ì •ë¦¬í•´ ë³¼ê¹Œìš”?", eng: "Shall we organize our thoughts?" }], subDefs: [{ subTerm: 'ì •ë¦¬í•˜ë‹¤', subDef: 'to summarize, to organize' }, { subTerm: '-ì•„/ì–´ ë³¼ê¹Œìš”?', subDef: '"Shall weâ€¦?" "How aboutâ€¦?"; used to suggest trying something together' }] },
            { term: 'ë§¨ë‚ ', mainDef: 'always, every day (colloquial)', examples: [{ kor: "ê·¸ëŠ” ë§¨ë‚  ëŠ¦ê²Œ ì™€ìš”.", eng: "He is always late." }, { kor: "ì €ëŠ” ë§¨ë‚  ì»¤í”¼ë¥¼ ë§ˆì…”ìš”.", eng: "I drink coffee every day." }] },
            { term: 'ë¶€ë”ªì¹˜ë‹¤', mainDef: 'to bump into, to collide', examples: [{ kor: "ê¸¸ì—ì„œ ì‚¬ëŒê³¼ ë¶€ë”ªí˜”ì–´ìš”.", eng: "I bumped into someone on the street." }, { kor: "ì°¨ê°€ ë‚˜ë¬´ì— ë¶€ë”ªí˜”ì–´ìš”.", eng: "The car bumped into the tree." }] },
            { term: 'ë°”ë³´', mainDef: 'fool, idiot', examples: [{ kor: "ì €ëŠ” ë°”ë³´ê°€ ì•„ë‹ˆì—ìš”.", eng: "I am not a fool." }, { kor: "ê·¸ë ‡ê²Œ ë§í•˜ì§€ ë§ˆì„¸ìš”. ë°”ë³´ ê°™ì•„ìš”.", eng: "Don't say that. It sounds foolish." }] },
            { term: 'ìë¦¬ë¥¼ ë°”ê¿” ì•‰ìœ¼ë©´ ë˜ì£ ', mainDef: 'We just need to switch seats / All we have to do is change seats', examples: [{ kor: "í”¼ê³¤í•˜ë©´ ì¡°ê¸ˆ ì‰¬ë©´ ë¼ìš”.", eng: "If you are tired, you just need to rest a bit." }, { kor: "ëª¨ë¥´ë©´ ì§ˆë¬¸í•˜ë©´ ë¼ìš”.", eng: "If you don't know, you just have to ask." }], subDefs: [{ subTerm: 'ìë¦¬', subDef: 'seat, place' }, { subTerm: 'ë°”ê¿” ì•‰ë‹¤', subDef: 'to switch seats, to change seats' }, { subTerm: '-ë©´/ìœ¼ë©´ ë˜ë‹¤', subDef: 'used to say that one condition or action is enough, often translated as "all you have to do is â€¦" or "it\'s fine if â€¦."' }, { subTerm: '-ì£ ', subDef: 'informal sentence ending used for confirmation or emphasis' }] },
            { term: 'ì˜¤ëŠ˜ì€ ì—¬ê¸°ê¹Œì§€ í• ê²Œìš”', mainDef: "Let's stop here for today / That's all for today", examples: [{ kor: "ìˆ˜ì—…ì€ ì—¬ê¸°ê¹Œì§€ í• ê²Œìš”.", eng: "Let's stop the class here." }, { kor: "ì˜¤ëŠ˜ì€ ì´ ì¼ë§Œ í• ê²Œìš”.", eng: "I will only do this work for today." }], subDefs: [{ subTerm: 'ì—¬ê¸°ê¹Œì§€', subDef: 'up to here, this far' }, { subTerm: '-ê²Œìš”', subDef: 'used to politely express your decision or intention to do something, especially when it affects the listener' }] }
        ];

        const QUIZ_LIST = [
            { 
                id: 1, 
                questionKor: "ë‹¤ìŒ ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”.", 
                questionEng: "Choose the correct word for the blank.", 
                sentence_pre: "ì „ ì„¸ê³„ì—ì„œ ì•½ 10%ì˜ ì‚¬ëŒë“¤ì´ ", 
                sentence_post: "ì˜ˆìš”.", 
                correct_word: "ì™¼ì†ì¡ì´", 
                translation_pre: "Approximately 10% of people worldwide are ", 
                translation_answer: "left-handed", 
                translation_post: ".", 
                hint: "People who use their left hand.", 
                options: [
                    { text: "ì™¼ì†ì¡ì´", isCorrect: true, feedback: "The dialogue states that about 10% of the world's population is left-handed." }, 
                    { text: "ì˜¤ë¥¸ì†ì¡ì´", isCorrect: false, feedback: "'Right-handed people' are mentioned for comparison, but they are not the main topic." }, 
                    { text: "ì˜ˆìˆ ê°€", isCorrect: false, feedback: "This is a stereotype discussed, not a fact about the population." }, 
                    { text: "ê³¼í•™ì", isCorrect: false, feedback: "This is a stereotype discussed, not a fact about the population." }
                ] 
            },
            { 
                id: 2, 
                questionKor: "ë‹¤ìŒ ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”.", 
                questionEng: "Choose the correct word for the blank.", 
                sentence_pre: "ì™¼ì†ì¡ì´ì— ëŒ€í•œ ", 
                sentence_post: "ë„ ë§ì•„ìš”.", 
                correct_word: "í¸ê²¬", 
                translation_pre: "There are also many ", 
                translation_answer: "prejudices", 
                translation_post: " about left-handed people.", 
                hint: "A preconceived opinion.", 
                options: [
                    { text: "í¸ê²¬", isCorrect: true, feedback: "Yuna mentions that there are many prejudices about left-handed people, such as the idea that they are more creative." }, 
                    { text: "ì¥ì ", isCorrect: false, feedback: "Advantages are discussed, but the specific context is about incorrect beliefs." }, 
                    { text: "ë‹¨ì ", isCorrect: false, feedback: "Disadvantages are discussed, but the specific context is about incorrect beliefs." }, 
                    { text: "ì‚¬ì‹¤", isCorrect: false, feedback: "The statement is about beliefs, many of which are not facts." }
                ] 
            },
            { 
                id: 3, 
                questionKor: "ë‹¤ìŒ ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”.", 
                questionEng: "Choose the correct word for the blank.", 
                sentence_pre: "ë³´í†µ ì‚¬ëŒë“¤ì€ ì™¼ì†ì¡ì´ê°€ ë” ", 
                sentence_post: " ì‚¬ëŒì´ë¼ê³  ìƒê°í•´ìš”.", 
                correct_word: "ì°½ì˜ì ì¸", 
                translation_pre: "People often think left-handed people are more ", 
                translation_answer: "creative", 
                translation_post: " people.", 
                hint: "Related to thinking of new things.", 
                options: [
                    { text: "ì°½ì˜ì ì¸", isCorrect: true, feedback: "The dialogue identifies the idea of being more 'ì°½ì˜ì ' (creative) as the most common stereotype associated with left-handed people." }, 
                    { text: "ì˜ˆìœ", isCorrect: false, feedback: "'Pretty' is not a stereotype mentioned in the dialogue." }, 
                    { text: "ê°•í•œ", isCorrect: false, feedback: "'Strong' is not a stereotype mentioned in the dialogue." }, 
                    { text: "ë©ì²­í•œ", isCorrect: false, feedback: "'Stupid' is not a stereotype mentioned in the dialogue." }
                ] 
            },
            { 
                id: 4, 
                questionKor: "ë‹¤ìŒ ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”.", 
                questionEng: "Choose the correct word for the blank.", 
                sentence_pre: "ìš°ë””ê°€ ì¹œêµ¬ í•œ ëª…ì„ ë³´ê³  ëª¨ë“  ì™¼ì†ì¡ì´ê°€ ì˜ˆìˆ ê°€ë¼ê³  ìƒê°í•˜ëŠ” ê±´ ", 
                sentence_post: "ì˜ˆìš”.", 
                correct_word: "ì¼ë°˜í™”", 
                translation_pre: "Woody thinking all left-handed people are artists after seeing one friend is a(n) ", 
                translation_answer: "generalization", 
                translation_post: ".", 
                hint: "Applying a specific case to a general rule.", 
                options: [
                    { text: "ì¼ë°˜í™”", isCorrect: true, feedback: "Yuna points out that concluding all lefties are artists based on one friend is a 'ì¼ë°˜í™”' (generalization)." }, 
                    { text: "ì‚¬ì‹¤", isCorrect: false, feedback: "Woody's thought is the opposite of a fact." }, 
                    { text: "ìš°ì—°", isCorrect: false, feedback: "'Coincidence' doesn't describe an act of flawed reasoning." }, 
                    { text: "ê³¼í•™", isCorrect: false, feedback: "'Science' does not fit the context." }
                ] 
            },
            { 
                id: 5, 
                questionKor: "ë‹¤ìŒ ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”.", 
                questionEng: "Choose the correct word for the blank.", 
                sentence_pre: "ë‹¤ë¹ˆì¹˜, ì•„ì¸ìŠˆíƒ€ì¸, ìŠ¤í‹°ë¸Œ ì¡ìŠ¤ê°€ ì™¼ì†ì¡ì´ì¸ ê±´ ", 
                sentence_post: "ì´ì—ìš”.", 
                correct_word: "ìš°ì—°", 
                translation_pre: "The fact that Da Vinci, Einstein, and Steve Jobs were left-handed is a ", 
                translation_answer: "coincidence", 
                translation_post: ".", 
                hint: "Happening by chance.", 
                options: [
                    { text: "ìš°ì—°", isCorrect: true, feedback: "Yuna explains that famous left-handed people are just a 'ìš°ì—°' (coincidence), not proof of a rule." }, 
                    { text: "ë¹„ë°€", isCorrect: false, feedback: "'Secret' does not fit the context." }, 
                    { text: "ì‚¬ì‹¤", isCorrect: false, feedback: "While it is a fact that they were left-handed, Yuna's point is that the collection of these facts is a coincidence." }, 
                    { text: "ê³¼í•™", isCorrect: false, feedback: "'Science' does not fit the context." }
                ] 
            },
            { 
                id: 6, 
                questionKor: "ë‹¤ìŒ ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”.", 
                questionEng: "Choose the correct word for the blank.", 
                sentence_pre: "ì™¼ì†ì¡ì´ê°€ ì‹¤ìˆ˜ë¥¼ ë§ì´ í•œë‹¤ëŠ” ê±´ ë°˜ì ˆì€ ì‚¬ì‹¤ì´ê³ , ë°˜ì ˆì€ ", 
                sentence_post: "ì˜ˆìš”.", 
                correct_word: "ì˜¤í•´", 
                translation_pre: "The idea that left-handed people make a lot of mistakes is half true and half a(n) ", 
                translation_answer: "misunderstanding", 
                translation_post: ".", 
                hint: "Incorrectly understanding something.", 
                options: [
                    { text: "ì˜¤í•´", isCorrect: true, feedback: "Yuna clarifies that it's an 'ì˜¤í•´' (misunderstanding) of the *reason* for the mistakes, which is the environment." }, 
                    { text: "ì´ì•¼ê¸°", isCorrect: false, feedback: "'Story' does not fit the context of explaining a flawed belief." }, 
                    { text: "ê°€ì§œ", isCorrect: false, feedback: "'Fake' is too strong and simple." }, 
                    { text: "ì¢…êµ", isCorrect: false, feedback: "'Religion' is irrelevant here." }
                ] 
            },
            { 
                id: 7, 
                questionKor: "ë‹¤ìŒ ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”.", 
                questionEng: "Choose the correct word for the blank.", 
                sentence_pre: "ê°€ìœ„ë‚˜ ë§ˆìš°ìŠ¤ ê°™ì€ ë¬¼ê±´ì„ ì“¸ ë•Œ ì™¼ì†ì¡ì´ëŠ” ", 
                sentence_post: ".", 
                correct_word: "ë¶ˆí¸í•´ìš”", 
                translation_pre: "When using things like scissors or a mouse, left-handed people feel ", 
                translation_answer: "uncomfortable", 
                translation_post: ".", 
                hint: "Not comfortable.", 
                options: [
                    { text: "ë¶ˆí¸í•´ìš”", isCorrect: true, feedback: "The dialogue explains that using tools designed for right-handers is 'ë¶ˆí¸í•´ìš”' (uncomfortable/inconvenient) for left-handers." }, 
                    { text: "ìœ ë¦¬í•´ìš”", isCorrect: false, feedback: "'Advantageous' is the opposite of the correct answer." }, 
                    { text: "ìµìˆ™í•´ìš”", isCorrect: false, feedback: "'Familiar' is unlikely, as the tool is designed for the other hand." }, 
                    { text: "ê´œì°®ì•„ìš”", isCorrect: false, feedback: "'It's okay' contradicts the point being made." }
                ] 
            },
            { 
                id: 8, 
                questionKor: "ë‹¤ìŒ ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”.", 
                questionEng: "Choose the correct word for the blank.", 
                sentence_pre: "ì™¼ì†ì¡ì´ê°€ ì‹¤ìˆ˜ë¥¼ ë§ì´ í•˜ëŠ” ê±´ ì™¼ì†ì¡ì´ì˜ ë¬¸ì œê°€ ì•„ë‹ˆë¼ ", 
                sentence_post: "ì˜ ë¬¸ì œì˜ˆìš”.", 
                correct_word: "í™˜ê²½", 
                translation_pre: "The reason left-handed people make many mistakes is not a problem with them, but a problem of the ", 
                translation_answer: "environment", 
                translation_post: ".", 
                hint: "The surroundings.", 
                options: [
                    { text: "í™˜ê²½", isCorrect: true, feedback: "The mistakes are caused by an 'í™˜ê²½' (environment) designed for right-handed people." }, 
                    { text: "ê°œì¸", isCorrect: false, feedback: "'Individual' is what Yuna argues against; she says it's not a personal problem." }, 
                    { text: "ì‚¬íšŒ", isCorrect: false, feedback: "'Society' is a broader concept; 'environment' is more specific to the tools and situations mentioned." }, 
                    { text: "ìœ ì „", isCorrect: false, feedback: "'Genetics' is not discussed as the reason for making mistakes." }
                ] 
            },
            { 
                id: 9, 
                questionKor: "ë‹¤ìŒ ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”.", 
                questionEng: "Choose the correct word for the blank.", 
                sentence_pre: "í…Œë‹ˆìŠ¤, ë³µì‹±, ì•¼êµ¬ ê°™ì€ ìŠ¤í¬ì¸ ì—ì„œëŠ” ì™¼ì†ì¡ì´ê°€ ", 
                sentence_post: ".", 
                correct_word: "ìœ ë¦¬í•´ìš”", 
                translation_pre: "In sports like tennis, boxing, and baseball, left-handed people are ", 
                translation_answer: "at an advantage", 
                translation_post: ".", 
                hint: "In a better position.", 
                options: [
                    { text: "ìœ ë¦¬í•´ìš”", isCorrect: true, feedback: "Left-handers have an advantage in certain sports because opponents are not used to them. Therefore, it is 'ìœ ë¦¬í•´ìš”' (advantageous)." }, 
                    { text: "ë¶ˆë¦¬í•´ìš”", isCorrect: false, feedback: "'Disadvantageous' is the opposite of the correct answer." }, 
                    { text: "ìƒê´€ì—†ì–´ìš”", isCorrect: false, feedback: "'It doesn't matter' is incorrect, as an advantage is explicitly mentioned." }, 
                    { text: "ìœ„í—˜í•´ìš”", isCorrect: false, feedback: "'Dangerous' is not mentioned or implied." }
                ] 
            },
            { 
                id: 10, 
                questionKor: "ë‹¤ìŒ ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”.", 
                questionEng: "Choose the correct word for the blank.", 
                sentence_pre: "ë§ì€ ì„ ìˆ˜ë“¤ì´ ì˜¤ë¥¸ì†ì¡ì´ì™€ ì—°ìŠµì„ í•´ì„œ ì™¼ì†ì¡ì´ì— ", 
                sentence_post: " ì•Šì•„ìš”.", 
                correct_word: "ìµìˆ™í•˜ì§€", 
                translation_pre: "Because many athletes practice with right-handers, they are not ", 
                translation_answer: "used", 
                translation_post: " to left-handers.", 
                hint: "Accustomed to", 
                options: [
                    { text: "ìµìˆ™í•˜ì§€", isCorrect: true, feedback: "Yuna explains that the advantage in sports comes from the fact that opponents are not 'ìµìˆ™í•˜ë‹¤' (used to/familiar with) playing against left-handed people because they mostly practice with right-handed people." }, 
                    { text: "ë¶ˆí¸í•˜ì§€", isCorrect: false, feedback: "While opponents might feel uncomfortable, the specific reason given is the lack of familiarity." }, 
                    { text: "ìœ ë¦¬í•˜ì§€", isCorrect: false, feedback: "This describes the left-hander's position, not the opponent's feeling of familiarity." }, 
                    { text: "ì°½ì˜ì ì´ì§€", isCorrect: false, feedback: "This does not fit the context of familiarity or practice." }
                ] 
            }
        ];

        const SCRIPT_DATA = [
            { id: 's1', speaker: 'ìœ ë‚˜', kor: 'ì•ˆë…•í•˜ì„¸ìš”. <ì´ ì£¼ì œë¡œ ì´ì•¼ê¸°í•´ë´ìš”> íŒŸìºìŠ¤íŠ¸ì˜ˆìš”.', time: [12.600, 16.030], eng: "Hello! This is the <Let's Talk About This Topic> podcast." },
            { id: 's2', speaker: 'ìœ ë‚˜', kor: 'ì €ëŠ” ìœ ë‚˜ì˜ˆìš”.', time: [16.030, 17.454], eng: "I'm Yuna." },
            { id: 's3', speaker: 'ìš°ë””', kor: 'ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ìš°ë””ì˜ˆìš”.', time: [17.454, 19.888], eng: "Hello! I'm Woody." },
            { id: 's4', speaker: 'ìœ ë‚˜', kor: 'ì˜¤ëŠ˜ì˜ ì£¼ì œëŠ” \'ì™¼ì†ì¡ì´\'ì˜ˆìš”.', time: [19.888, 22.700], eng: "Today's topic is 'left-handed people'." },
            { id: 's5', speaker: 'ìš°ë””', kor: '\'ì™¼ì†ì¡ì´\'ëŠ” \'ì™¼ì†ì„ ìì£¼ ì“°ëŠ” ì‚¬ëŒ\'ì´ë€ ëœ»ì´ê³ ,', time: [22.700, 26.746], eng: "'Left-handed person' means 'a person who frequently uses their left hand,' and" },
            { id: 's6', speaker: 'ìš°ë””', kor: '\'ì˜¤ë¥¸ì†ì¡ì´ëŠ” ì˜¤ë¥¸ì†ì„ ìì£¼ ì“°ëŠ” ì‚¬ëŒ\'ì´ë€ ëœ»ì´ì£ .', time: [26.746, 30.435], eng: "'right-handed person' means 'a person who frequently uses their right hand,' right?" },
            { id: 's7', speaker: 'ìœ ë‚˜', kor: 'ë„¤ ë§ì•„ìš”.', time: [30.435, 31.737], eng: "Yes, that's right." },
            { id: 's8', speaker: 'ìœ ë‚˜', kor: 'ê·¸ëŸ¼ ìš°ë”” ì”¨ì—ê²Œ ì§ˆë¬¸í• ê²Œìš”.', time: [31.737, 34.114], eng: "Then I'll ask Woody a question." },
            { id: 's9', speaker: 'ìœ ë‚˜', kor: 'ì „ ì„¸ê³„ì—ì„œ ì™¼ì†ì¡ì´ê°€ ëª‡ í¼ì„¼íŠ¸ ìˆì„ê¹Œìš”?', time: [34.114, 38.054], eng: "What percentage of people in the world are left-handed?" },
            { id: 's10', speaker: 'ìš°ë””', kor: 'ìŒ... 1%.', time: [38.054, 39.995], eng: "Hmm... 1%?" },
            { id: 's11', speaker: 'ìœ ë‚˜', kor: 'ì•„ë‹ˆì—ìš”. ì•½ 10%ì˜ ì‚¬ëŒë“¤ì´ ì™¼ì†ì¡ì´ë¼ê³  í•´ìš”.', time: [39.995, 44.469], eng: "No. About 10% of people are said to be left-handed." },
            { id: 's12', speaker: 'ìš°ë””', kor: 'ğŸ˜¯ í—... 10%ìš”?', time: [44.469, 47.115], eng: "ğŸ˜¯ Whoa... 10%?" },
            { id: 's13', speaker: 'ìš°ë””', kor: 'ê·¸ëŸ¼... 10ëª… ì¤‘ì— 1ëª…ì´ë„¤ìš”.', time: [47.115, 50.000], eng: "Then... that's 1 out of 10 people." },
            { id: 's14', speaker: 'ìœ ë‚˜', kor: 'ìƒê°ë³´ë‹¤ ë§ì£ .', time: [50.000, 51.700], eng: "It's more than you think, right?" },
            { id: 's15', speaker: 'ìœ ë‚˜', kor: 'ê·¸ëŸ°ë° ì™¼ì†ì¡ì´ì— ëŒ€í•œ í¸ê²¬ë„ ë§ì•„ìš”.', time: [51.700, 55.616], eng: "But there are also many prejudices about left-handed people." },
            { id: 's16', speaker: 'ìœ ë‚˜', kor: '\'í¸ê²¬\'ì€ \'ì˜ëª» ìƒê°í•˜ëŠ” ê²ƒ\'ì´ë¼ëŠ” ëœ»ì´ì—ìš”.', time: [55.616, 59.281], eng: "'Prejudice' means 'thinking incorrectly'." },
            { id: 's17', speaker: 'ìš°ë””', kor: 'ë¬´ìŠ¨ í¸ê²¬ì´ ìˆì–´ìš”?', time: [59.281, 61.009], eng: "What prejudices are there?" },
            { id: 's18', speaker: 'ìœ ë‚˜', kor: 'ë³´í†µ ì‚¬ëŒë“¤ì´ "ì™¼ì†ì¡ì´ê°€ ë” ì°½ì˜ì ì´ë‹¤"ë¼ê³  ìƒê°í•´ìš”.', time: [61.009, 66.165], eng: "People usually think 'left-handed people are more creative'." },
            { id: 's19', speaker: 'ìœ ë‚˜', kor: 'ì°½ì˜ì ì€ \'ì™„ì „íˆ ìƒˆë¡œìš´ ê²ƒì„ ìƒê°í•˜ë‹¤\'ë¼ëŠ” ëœ»ì´ì—ìš”.', time: [66.165, 71.306], eng: "'Creative' means 'to think of something completely new'." },
            { id: 's20', speaker: 'ìœ ë‚˜', kor: 'ê·¸ëŸ°ë° ì´ê±´ í¸ê²¬ì´ì—ìš”.', time: [71.306, 73.700], eng: "But this is a prejudice." },
            { id: 's21', speaker: 'ìš°ë””', kor: 'ì•„ë‹ˆì—ìš”. ì‚¬ì‹¤ì´ì—ìš”.', time: [73.700, 76.372], eng: "No. It's true." },
            { id: 's22', speaker: 'ìš°ë””', kor: 'ì œ ì¹œêµ¬ê°€ ì™¼ì†ì¡ì´ì¸ë°, ê·¸ë¦¼ì„ ì§„ì§œ ì˜ ê·¸ë ¤ìš”!', time: [76.372, 80.812], eng: "My friend is left-handed and draws really well!" },
            { id: 's23', speaker: 'ìš°ë””', kor: 'ì™¼ì†ì¡ì´ëŠ” ë‹¤ ì˜ˆìˆ ê°€ì˜ˆìš”!', time: [80.812, 83.600], eng: "All left-handed people are artists!" },
            { id: 's24', speaker: 'ìœ ë‚˜', kor: 'ğŸ¤¨ ìš°ë”” ì”¨, ì¹œêµ¬ í•œ ëª… ë•Œë¬¸ì— ê·¸ë ‡ê²Œ ìƒê°í•˜ëŠ” ê±°ì˜ˆìš”?', time: [83.600, 87.807], eng: "ğŸ¤¨ Woody, are you thinking that way because of one friend?" },
            { id: 's25', speaker: 'ìœ ë‚˜', kor: 'ê·¸ê±´ ì¼ë°˜í™”ì˜ˆìš”.', time: [87.807, 89.793], eng: "That's generalization." },
            { id: 's26', speaker: 'ìœ ë‚˜', kor: '\'ì¼ë°˜í™”\'ëŠ” \'í•˜ë‚˜ë¥¼ ë³´ê³  ëª¨ë‘ ê·¸ë ‡ë‹¤ê³  ìƒê°í•˜ë‹¤\'ë¼ëŠ” ëœ»ì´ì—ìš”.', time: [89.793, 95.000], eng: "'Generalization' means 'seeing one thing and thinking everything is like that'." },
            { id: 's27', speaker: 'ìš°ë””', kor: 'ì•„ë‹ˆì—ìš”. ì‚¬ì‹¤ì´ì—ìš”.', time: [95.000, 97.546], eng: "No. It's true." },
            { id: 's28', speaker: 'ìš°ë””', kor: 'ë ˆì˜¤ë‚˜ë¥´ë„ ë‹¤ë¹ˆì¹˜, ì•Œë² ë¥´íŠ¸ ì•„ì¸ìŠˆíƒ€ì¸, ìŠ¤í‹°ë¸Œ ì¡ìŠ¤, ëª¨ë‘ ì™¼ì†ì¡ì´ì˜ˆìš”! ğŸ˜¤', time: [97.546, 104.294], eng: "Leonardo da Vinci, Albert Einstein, Steve Jobs, they're all left-handed! ğŸ˜¤" },
            { id: 's29', speaker: 'ìœ ë‚˜', kor: 'ê·¸ê±´ ìš°ì—°ì´ì—ìš”.', time: [104.294, 106.022], eng: "That's coincidence." },
            { id: 's30', speaker: 'ìœ ë‚˜', kor: '\'ìš°ì—°\'ì€ \'ê³„íší•˜ì§€ ì•Šì€ ì¼\'ì´ë¼ëŠ” ëœ»ì´ì—ìš”.', time: [106.022, 110.600], eng: "'Coincidence' means 'an unplanned event'." },
            { id: 's31', speaker: 'ìš°ë””', kor: 'ì•„ë‹ˆì—ìš”. ì‚¬ì‹¤ì´ì—ìš”.', time: [110.600, 113.509], eng: "No. It's true." },
            { id: 's32', speaker: 'ìš°ë””', kor: 'ê³¼í•™ ìˆ˜ì—…ì—ì„œ ë°°ì› ì–´ìš”.', time: [113.509, 116.018], eng: "I learned it in science class." },
            { id: 's33', speaker: 'ìš°ë””', kor: 'ì™¼ì†ì¡ì´ëŠ” ì˜¤ë¥¸ìª½ ë‡Œë¥¼ ë§ì´ ì¨ì„œ ë” ì°½ì˜ì ì´ì—ìš”.', time: [116.018, 121.307], eng: "Left-handed people use their right brain more, so they're more creative." },
            { id: 's34', speaker: 'ìœ ë‚˜', kor: 'ìµœê·¼ì— ë‡Œê³¼í•™ìë“¤ì€ ê·¸ ì£¼ì¥ì´ ì‚¬ì‹¤ì´ ì•„ë‹ˆë¼ê³  ë§í•´ìš”.', time: [121.307, 125.659], eng: "Recently, brain scientists say that claim is not true." },
            { id: 's35', speaker: 'ìœ ë‚˜', kor: 'ìš°ë¦¬ëŠ” ì°½ì˜ì ì¸ ì¼ì„ í•  ë•Œ ì˜¤ë¥¸ìª½ ë‡Œë§Œ ì“°ì§€ ì•Šì•„ìš”.', time: [125.659, 129.760], eng: "We don't only use the right brain when doing creative work." },
            { id: 's36', speaker: 'ìœ ë‚˜', kor: 'ì™¼ìª½ ë‡Œì™€ ì˜¤ë¥¸ìª½ ë‡Œë¥¼ í•¨ê»˜ ì¨ìš”.', time: [129.760, 132.600], eng: "We use both the left and right brain together." },
            { id: 's37', speaker: 'ìš°ë””', kor: 'ì™¼ì†ì¡ì´ê°€ ì‹¤ìˆ˜ë¥¼ ë” ë§ì´ í•´ìš”. ê·¸ê±´ ì‚¬ì‹¤ ë§ì£ ?', time: [132.600, 138.954], eng: "Left-handed people make more mistakes. That's true, right?" },
            { id: 's38', speaker: 'ìœ ë‚˜', kor: 'ë°˜ì ˆì€ ì‚¬ì‹¤ì´ê³ , ë°˜ì ˆì€ ì˜¤í•´ì˜ˆìš”.', time: [138.954, 142.158], eng: "Half is true, half is a misunderstanding." },
            { id: 's39', speaker: 'ìœ ë‚˜', kor: 'ì˜¤í•´ëŠ” \'ì˜ëª» ì´í•´í•˜ë‹¤\'ë¼ëŠ” ëœ»ì´ì—ìš”.', time: [142.158, 145.720], eng: "'Misunderstanding' means 'to understand incorrectly'." },
            { id: 's40', speaker: 'ìš°ë””', kor: 'ë¬´ìŠ¨ ë§ì´ì—ìš”?', time: [145.720, 147.081], eng: "What do you mean?" },
            { id: 's41', speaker: 'ìœ ë‚˜', kor: 'ì˜ˆë¥¼ ë“¤ì–´, ê°€ìœ„ë‚˜ ì»´í“¨í„° ë§ˆìš°ìŠ¤ë¥¼ ìƒê°í•´ ë³´ì„¸ìš”.', time: [147.081, 151.243], eng: "For example, think about scissors or a computer mouse." },
            { id: 's42', speaker: 'ìœ ë‚˜', kor: 'ì´ëŸ° ë¬¼ê±´ë“¤ì´ ì˜¤ë¥¸ì†ì¡ì´ë¥¼ ìœ„í•´ ë§Œë“¤ì–´ì¡Œì–´ìš”.', time: [151.243, 155.281], eng: "These things are made for right-handed people." },
            { id: 's43', speaker: 'ìš°ë””', kor: 'ì•„... ë¶ˆí¸í•˜ê² ë„¤ìš”.', time: [155.281, 157.900], eng: "Ah... that must be uncomfortable." },
            { id: 's44', speaker: 'ìœ ë‚˜', kor: 'ë§ì•„ìš”. ê·¸ë˜ì„œ ì™¼ì†ì¡ì´ë“¤ì´ ë” ë§ì´ ì‹¤ìˆ˜ë¥¼ í•´ìš”.', time: [157.900, 162.296], eng: "That's right. So left-handed people make more mistakes." },
            { id: 's45', speaker: 'ìœ ë‚˜', kor: 'ì™¼ì†ì¡ì´ì˜ ë¬¸ì œê°€ ì•„ë‹ˆë¼, í™˜ê²½ì˜ ë¬¸ì œì˜ˆìš”.', time: [162.296, 166.107], eng: "It's not a problem with left-handed people, but a problem with the environment." },
            { id: 's46', speaker: 'ìœ ë‚˜', kor: '\'í™˜ê²½\'ì€ \'ì£¼ë³€ ìƒí™©\'ì´ë¼ëŠ” ëœ»ì´ì—ìš”.', time: [166.107, 169.200], eng: "'Environment' means 'surrounding situation'." },
            { id: 's47', speaker: 'ìš°ë””', kor: 'ğŸ˜¨ ê·¸ëŸ¼... ì™¼ì†ì¡ì´ëŠ” ë¶ˆí¸í•˜ë‹ˆê¹Œ ê³ ì³ì•¼ í•´ìš”!', time: [169.200, 173.480], eng: "ğŸ˜¨ Then... left-handed people should be fixed because it's inconvenient!" },
            { id: 's48', speaker: 'ìœ ë‚˜', kor: 'ìš°ë”” ì”¨! ê·¸ê±´ ë‚˜ìœ ìƒê°ì´ì—ìš”.', time: [173.480, 176.767], eng: "Woody! That's a bad thought." },
            { id: 's49', speaker: 'ìš°ë””', kor: 'ì™œìš”?', time: [176.767, 177.521], eng: "Why?" },
            { id: 's50', speaker: 'ìœ ë‚˜', kor: 'ì™¼ì†ì¡ì´ëŠ” ì˜ëª»ëœ ê²Œ ì•„ë‹ˆì—ìš”.', time: [177.521, 180.506], eng: "Being left-handed is not wrong." },
            { id: 's51', speaker: 'ìœ ë‚˜', kor: 'ì˜¤íˆë ¤ ì™¼ì†ì¡ì´ë¥¼ ìœ„í•œ ë¬¼ê±´ì„ ë” ë§ì´ ë§Œë“¤ì–´ì•¼ í•´ìš”!', time: [180.506, 185.088], eng: "Rather, we should make more things for left-handed people!" },
            { id: 's52', speaker: 'ìš°ë””', kor: 'ê·¸ëŸ¼ ì™¼ì†ì¡ì´ì˜ ì¥ì ì€ ë­ì˜ˆìš”? ì•„ë¬´ ê²ƒë„ ì—†ì–´ìš”?', time: [185.088, 189.714], eng: "Then what are the advantages of being left-handed? Are there none?" },
            { id: 's53', speaker: 'ìœ ë‚˜', kor: 'ìˆì–´ìš”. ìŠ¤í¬ì¸ ì—ì„œìš”.', time: [189.714, 192.741], eng: "There are. In sports." },
            { id: 's54', speaker: 'ìš°ë””', kor: 'ìŠ¤í¬ì¸ ìš”?', time: [192.741, 193.999], eng: "Sports?" },
            { id: 's55', speaker: 'ìœ ë‚˜', kor: 'ë„¤. í…Œë‹ˆìŠ¤, ë³µì‹±, ì•¼êµ¬ ê°™ì€ ìŠ¤í¬ì¸ ì—ì„œëŠ” ì™¼ì†ì¡ì´ê°€ ìœ ë¦¬í•´ìš”.', time: [193.999, 199.728], eng: "Yes. In sports like tennis, boxing, and baseball, left-handed people have an advantage." },
            { id: 's56', speaker: 'ìš°ë””', kor: '\'ìœ ë¦¬í•˜ë‹¤\'ëŠ” \'ë” ì¢‹ë‹¤\'ë¼ëŠ” ëœ»ì´ì—ìš”. ë§ì£ ?', time: [199.728, 204.886], eng: "'Advantageous' means 'better,' right?" },
            { id: 's57', speaker: 'ìš°ë””', kor: 'ê·¸ëŸ°ë° ì™œ ìœ ë¦¬í•´ìš”?', time: [204.886, 207.301], eng: "But why is it advantageous?" },
            { id: 's58', speaker: 'ìœ ë‚˜', kor: 'ë§ì€ ì„ ìˆ˜ë“¤ì´ ì˜¤ë¥¸ì†ì¡ì´ë‘ ì—°ìŠµì„ í•´ìš”.', time: [207.301, 211.026], eng: "Many athletes practice with right-handed people." },
            { id: 's59', speaker: 'ìœ ë‚˜', kor: 'ê·¸ë˜ì„œ ì™¼ì†ì¡ì´ì— ìµìˆ™í•˜ì§€ ì•Šì•„ìš”.', time: [211.026, 214.409], eng: "So they're not used to left-handed people." },
            { id: 's60', speaker: 'ìœ ë‚˜', kor: '\'ìµìˆ™í•˜ë‹¤\'ëŠ” \'ìì£¼ ê²½í—˜í•´ì„œ ì˜ ì•Œë‹¤\'ë¼ëŠ” ëœ»ì´ì—ìš”.', time: [214.409, 219.374], eng: "'Used to' means 'to know well through frequent experience'." },
            { id: 's61', speaker: 'ìš°ë””', kor: 'ì˜¤!!! ê·¸ëŸ¼ ì˜¤ëŠ˜ë¶€í„° ì €ëŠ” ì™¼ì†ì¡ì´ê°€ ë  ê±°ì˜ˆìš”.', time: [219.374, 224.541], eng: "Oh!!! Then from today I'll become left-handed." },
            { id: 's62', speaker: 'ìœ ë‚˜', kor: 'ìš°ë”” ì”¨, ê·¸ì „ì— ì˜¤ëŠ˜ ë°°ìš´ ë‹¨ì–´ë¥¼ ì •ë¦¬í•´ ë³¼ê¹Œìš”?', time: [224.541, 229.030], eng: "Woody, before that, shall we review the words we learned today?" },
            { id: 's63', speaker: 'ìš°ë””', kor: 'â€¢ ì™¼ì†ì¡ì´: ì™¼ì†ì„ ìì£¼ ì“°ëŠ” ì‚¬ëŒ', time: [229.136, 233.682], eng: "â€¢ Left-handed person: a person who frequently uses their left hand" },
            { id: 's64', speaker: 'ìš°ë””', kor: 'â€¢ ì˜¤ë¥¸ì†ì¡ì´: ì˜¤ë¥¸ì†ì„ ìì£¼ ì“°ëŠ” ì‚¬ëŒ', time: [233.682, 237.705], eng: "â€¢ Right-handed person: a person who frequently uses their right hand" },
            { id: 's65', speaker: 'ìš°ë””', kor: 'â€¢ í¸ê²¬: ì˜ëª» ìƒê°í•˜ëŠ” ê²ƒ', time: [237.705, 240.926], eng: "â€¢ Prejudice: thinking incorrectly" },
            { id: 's66', speaker: 'ìš°ë””', kor: 'â€¢ ì°½ì˜ì : ì™„ì „íˆ ìƒˆë¡œìš´ ê²ƒì„ ìƒê°í•˜ë‹¤', time: [240.926, 245.426], eng: "â€¢ Creative: to think of something completely new" },
            { id: 's67', speaker: 'ìš°ë””', kor: 'â€¢ ì¼ë°˜í™”: í•˜ë‚˜ë¥¼ ë³´ê³  ëª¨ë‘ ê·¸ë ‡ë‹¤ê³  ìƒê°í•˜ë‹¤', time: [245.426, 250.342], eng: "â€¢ Generalization: seeing one thing and thinking everything is like that" },
            { id: 's68', speaker: 'ìœ ë‚˜', kor: 'â€¢ ìš°ì—°: ê³„íší•˜ì§€ ì•Šì€ ì¼', time: [250.342, 253.345], eng: "â€¢ Coincidence: an unplanned event" },
            { id: 's69', speaker: 'ìœ ë‚˜', kor: 'â€¢ ì˜¤í•´: ì˜ëª» ì´í•´í•˜ë‹¤', time: [253.345, 255.961], eng: "â€¢ Misunderstanding: to understand incorrectly" },
            { id: 's70', speaker: 'ìœ ë‚˜', kor: 'â€¢ í™˜ê²½: ì£¼ë³€ ìƒí™©', time: [255.961, 258.225], eng: "â€¢ Environment: surrounding situation" },
            { id: 's71', speaker: 'ìœ ë‚˜', kor: 'â€¢ ìœ ë¦¬í•˜ë‹¤: ë” ì¢‹ë‹¤', time: [258.225, 260.592], eng: "â€¢ Advantageous: better" },
            { id: 's72', speaker: 'ìœ ë‚˜', kor: 'â€¢ ìµìˆ™í•˜ë‹¤: ìì£¼ ê²½í—˜í•´ì„œ ì˜ ì•Œë‹¤', time: [260.592, 264.991], eng: "â€¢ Used to: to know well through frequent experience" },
            { id: 's73', speaker: 'ìš°ë””', kor: 'ìœ ë‚˜ ì”¨, ê·¸ëŸ°ë° ì™¼ì†ì¡ì´ ì¹œêµ¬ì™€ ë°¥ ë¨¹ì„ ë•Œ,', time: [265.642, 270.697], eng: "Yuna, but when eating with a left-handed friend," },
            { id: 's74', speaker: 'ìš°ë””', kor: 'ê·¸ ì¹œêµ¬ ì™¼íŒ”ì´ë‘ ì œ ì˜¤ë¥¸íŒ”ì´ ë§¨ë‚  ë¶€ë”ªí˜€ìš”!', time: [270.697, 274.154], eng: "their left arm and my right arm always bump into each other!" },
            { id: 's75', speaker: 'ìš°ë””', kor: 'ê·¸ê±´ ì–´ë–»ê²Œ í•´ìš”?', time: [274.154, 275.600], eng: "What do I do about that?" },
            { id: 's76', speaker: 'ìœ ë‚˜', kor: 'ìš°ë”” ì”¨ëŠ” ë°”ë³´ì˜ˆìš”?', time: [275.600, 277.640], eng: "Woody, are you a fool?" },
            { id: 's77', speaker: 'ìœ ë‚˜', kor: 'ê·¸ëƒ¥ ìë¦¬ë¥¼ ë°”ê¿” ì•‰ìœ¼ë©´ ë˜ì£ ğŸ¤£!', time: [277.640, 280.661], eng: "You just need to switch seatsğŸ¤£!" },
            { id: 's78', speaker: 'ìš°ë””', kor: 'ğŸ˜…ì˜¤ëŠ˜ì€ ì—¬ê¸°ê¹Œì§€ í• ê²Œìš”. ì•ˆë…•íˆ ê³„ì„¸ìš”!', time: [280.661, 285.600], eng: "ğŸ˜…That's all for today. Goodbye!" },
            { id: 's79', speaker: 'ìœ ë‚˜', kor: 'ì•ˆë…•íˆ ê³„ì„¸ìš”! ë‹¤ìŒì— ë˜ ë§Œë‚˜ìš”!', time: [285.600, 288.552], eng: "Goodbye! See you next time!" }
        ];

        const DISCUSS_DATA = [
            { id: 1, question: "1. ì—¬ëŸ¬ë¶„ì€ ì™¼ì†ì¡ì´ì˜ˆìš”, ì˜¤ë¥¸ì†ì¡ì´ì˜ˆìš”?", translation: "Are you left-handed or right-handed?", keyVocab: [{ term: "ì™¼ì†ì¡ì´", meaning_eng: "A person who primarily uses their left hand." }, { term: "ì˜¤ë¥¸ì†ì¡ì´", meaning_eng: "A person who primarily uses their right hand." }] },
            { id: 2, question: "2. ìš°ë””ëŠ” \"ì™¼ì†ì¡ì´ëŠ” ë¶ˆí¸í•˜ë‹ˆê¹Œ ê³ ì³ì•¼ í•´ìš”!\"ë¼ê³  ë§í–ˆì–´ìš”. ì™¼ì†ì¡ì´ë¥¼ ì˜¤ë¥¸ì†ì¡ì´ë¡œ ë°”ê¿”ì•¼ í• ê¹Œìš”? ì—¬ëŸ¬ë¶„ì€ ì–´ë–»ê²Œ ìƒê°í•´ìš”?", translation: "Woody said, \"Left-handedness is inconvenient, so it should be fixed!\" Should left-handed people be changed to right-handed? What do you think?", keyVocab: [{ term: "ë¶ˆí¸í•˜ë‹¤", meaning_eng: "To be uncomfortable, inconvenient." }, { term: "ê³ ì¹˜ë‹¤", meaning_eng: "To fix, to correct." }] },
            { id: 3, question: "3. ì™¼ì†ì¡ì´ë¥¼ ìœ„í•œ ë¬¼ê±´ì„ ë” ë§ì´ ë§Œë“¤ì–´ì•¼ í• ê¹Œìš”? ë§Œì•½ ì—¬ëŸ¬ë¶„ì´ ì™¼ì†ì¡ì´ë¥¼ ìœ„í•œ ë¬¼ê±´ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤ë©´, ì–´ë–¤ ë¬¼ê±´ì„ ë§Œë“¤ê³  ì‹¶ì–´ìš”?", translation: "Should more products be made for left-handed people? If you could create a product for left-handed people, what would you want to make?", keyVocab: [{ term: "ì™¼ì†ì¡ì´ë¥¼ ìœ„í•œ ë¬¼ê±´", meaning_eng: "Products for left-handed people." }] },
            { id: 4, question: "4. ìŠ¤í¬ì¸ ë¥¼ í•  ë•Œ ì™¼ì†ì¡ì´ê°€ ìœ ë¦¬í•˜ë‹¤ê³  í•´ìš”. ê·¸ëŸ¼ ì˜¤ë¥¸ì†ì¡ì´ê°€ ìŠ¤í¬ì¸ ë¥¼ í•  ë•Œ ì™¼ì†ìœ¼ë¡œ ì—°ìŠµí•´ì•¼ í•œë‹¤ê³  ìƒê°í•´ìš”?", translation: "They say being left-handed is advantageous in sports. Do you think right-handed people should practice with their left hand when playing sports?", keyVocab: [{ term: "ìœ ë¦¬í•˜ë‹¤", meaning_eng: "To be advantageous, beneficial." }, { term: "ì—°ìŠµí•˜ë‹¤", meaning_eng: "To practice." }] },
            { id: 5, question: "5. ë‹¤ë¥¸ ìƒí™©ì—ì„œë„ ì™¼ì†ì¡ì´ê°€ ìœ ë¦¬í• ê¹Œìš”?", translation: "Could being left-handed be advantageous in other situations too?", keyVocab: [{ term: "ìƒí™©", meaning_eng: "Situation, circumstances." }, { term: "ìœ ë¦¬í•˜ë‹¤", meaning_eng: "To be advantageous, beneficial." }] },
            { id: 6, question: "6. â€œì™¼ì†ì¡ì´ëŠ” ì˜¤ë¥¸ìª½ ë‡Œë¥¼ ë§ì´ ì¨ì„œ ë” ì°½ì˜ì ì´ë‹¤â€ëŠ” ê³¼í•™ì  ì‚¬ì‹¤ì´ ì•„ë‹ˆì—ìš”. ê·¸ëŸ°ë° ì™œ ë§ì€ ì‚¬ëŒë“¤ì€ ì´ëŸ° ì˜¤í•´ë¥¼ í• ê¹Œìš”?", translation: "â€œLeft-handed people are more creative because they use the right side of their brain moreâ€ is not a scientific fact. Why do so many people have this misconception?", keyVocab: [{ term: "ì°½ì˜ì ì´ë‹¤", meaning_eng: "To be creative." }, { term: "ì˜¤í•´", meaning_eng: "Misunderstanding." }] },
            { id: 7, question: "7. 'ì°½ì˜ì ì¸ ì‚¬ëŒ'ì€ ì–´ë–¤ ì‚¬ëŒì¼ê¹Œìš”? ë¬´ì—‡ì´ ì‚¬ëŒë“¤ì„ ì°½ì˜ì ìœ¼ë¡œ ë§Œë“ ë‹¤ê³  ìƒê°í•´ìš”?", translation: "What kind of person is a 'creative person'? What do you think makes people creative?", keyVocab: [{ term: "ì°½ì˜ì ì¸ ì‚¬ëŒ", meaning_eng: "A creative person." }] },
            { id: 8, question: "8. ì™¼ì†ì¡ì´ì— ëŒ€í•œ ë‹¤ë¥¸ í¸ê²¬ì„ ì•Œê³  ìˆì–´ìš”?", translation: "Do you know of any other prejudices against left-handed people?", keyVocab: [{ term: "-ì— ëŒ€í•œ", meaning_eng: "About or regarding (a topic)." }, { term: "í¸ê²¬", meaning_eng: "Prejudice, bias." }] },
            { id: 9, question: "9. ì™œ ì˜¤ë¥¸ì†ì¡ì´ì— ëŒ€í•œ í¸ê²¬ì€ ì—†ì„ê¹Œìš”?", translation: "Why aren't there prejudices against right-handed people?", keyVocab: [{ term: "-ì— ëŒ€í•œ", meaning_eng: "About or regarding (a topic)." }, { term: "í¸ê²¬", meaning_eng: "Prejudice, bias." }] },
            { id: 10, question: "10. ì™œ ì‚¬ëŒë“¤ì€ ìì£¼ ìš°ì—°ì„ ì¼ë°˜í™”í• ê¹Œìš”?", translation: "Why do people often generalize from coincidences?", keyVocab: [{ term: "ìš°ì—°", meaning_eng: "Coincidence, chance." }, { term: "ì¼ë°˜í™”", meaning_eng: "Generalization." }] }
        ];

        const LEVEL_STYLES = { "A1": "bg-lime-50 text-lime-600 border-lime-100", "A1+": "bg-lime-50 text-lime-600 border-lime-100", "A2": "bg-green-50 text-green-600 border-green-100", "A2+": "bg-green-50 text-green-600 border-green-100", "B1": "bg-sky-50 text-sky-600 border-sky-100", "B1+": "bg-sky-50 text-sky-600 border-sky-100", "B2": "bg-blue-50 text-blue-600 border-blue-100", "B2+": "bg-blue-50 text-blue-600 border-blue-100", "C1": "bg-violet-50 text-violet-600 border-violet-100", "C1+": "bg-violet-50 text-violet-600 border-violet-100", "C2": "bg-violet-50 text-violet-600 border-violet-100" };
        const getLevelTheme = (l) => { const c = l.charAt(0); if(c==='A')return l==='A1'||l==='A1+'?'lime':'green'; if(c==='B')return l==='B1'||l==='B1+'?'sky':'blue'; return 'violet'; };

        // --- Icons ---
        const HomeIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="2" y="3" width="20" height="14" rx="2" ry="2" /><path d="M8 21h8" /><path d="M12 17v4" /></svg>);
        const LearnIcon = ({ className, filled }) => (<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="2" y="4" width="20" height="16" rx="4" fill={filled ? "currentColor" : "none"} /><polygon points="10 8 16 12 10 16 10 8" stroke={filled ? "#fff" : "currentColor"} fill={filled ? "#fff" : "none"} /></svg>);
        const VocabIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="none" className={className}><path d="M3.5 12.5 12.5 3.5h6a2 2 0 0 1 2 2v6l-9 9a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8Z" stroke="currentColor" strokeWidth="1.8"/><path d="M16.5 7.5h.01" stroke="currentColor" strokeWidth="3.2" strokeLinecap="round"/></svg>);
        const QuizIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="none" className={className}><rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" strokeWidth="1.8"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" stroke="currentColor" strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"/><path d="M12 17h.01" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"/></svg>);
        const DiscussIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="none" className={className}><path d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3h-2v3l-4.5-3H6a3 3 0 0 1-3-3V6Z" stroke="currentColor" strokeWidth="1.8" strokeLinejoin="round"/><path d="M7 8h10M7 12h7" stroke="currentColor" strokeWidth="1.8" strokeLinecap="round"/></svg>);
        const UserIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>);
        const LineIcon = ({ d, className }) => (<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d={d} /></svg>);
        const PlayIconLine = (props) => <LineIcon {...props} d="M5 3l14 9-14 9V3z" />;
        const PlayIconSolid = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M8 5v14l11-7z" /></svg>);
        const PauseIcon = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" /></svg>);
        const OpenBookSolidIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 6 C2 3 8 2 12 6 C16 2 22 3 22 6 V20 C22 17 16 16 12 20 C8 16 2 17 2 20 Z" /><path d="M12 6 V20" /><path d="M4.5 15 L7 9 L9.5 15" strokeWidth="1.5" /><path d="M5.5 13 H8.5" strokeWidth="1.5" /><path d="M15 10 H19" strokeWidth="1.5" /><path d="M15 13 H19" strokeWidth="1.5" /><path d="M15 16 H18" strokeWidth="1.5" /></svg>);
        const TranslateIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.09-.02.67-.02zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z" /></svg>);
        const ExternalLinkIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" /><polyline points="15 3 21 3 21 9" /><line x1="10" y1="14" x2="21" y2="3" /></svg>);
        const ChevronLeft = ({ className }) => <LineIcon d="m15 18-6-6 6-6" className={className}/>;
        const ChevronRight = ({ className }) => <LineIcon d="m9 18 6-6-6-6" className={className}/>;
        const SpeedSolidIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M20.38 8.57l-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44z"/><path d="M10.59 15.41a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83z"/></svg>);
        const SparklesIcon = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 00-1.423 1.423z" /></svg>);
        const RewindIcon = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="11 19 2 12 11 5 11 19" /><polygon points="22 19 13 12 22 5 22 19" /></svg>);
        const ForwardIcon = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="13 19 22 12 13 5 13 19" /><polygon points="2 19 11 12 2 5 2 19" /></svg>);
        const PlayCircleIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" className={className}><circle cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="1.8" /><path d="M10 8L16 12L10 16V8Z" fill="currentColor" /></svg>);

        // --- Sidebar Component ---
        const Sidebar = ({ activeTab, setActiveTab, isCollapsed, toggleSidebar, userLevel, themeColor }) => {
            const menus = [
                { id: 'home', label: 'ì‹œì‘ í˜ì´ì§€', subLabel: 'Home Page', icon: HomeIcon },
                { id: 'learn', label: 'ë™ì˜ìƒ ìë£Œ', subLabel: 'Video Resources', icon: LearnIcon },
                { id: 'vocab', label: 'í•µì‹¬ ì–´íœ˜', subLabel: 'Key Vocabulary', icon: VocabIcon },
                { id: 'quiz', label: 'ë‚´ìš© í™•ì¸ í€´ì¦ˆ', subLabel: 'Comprehension Quiz', icon: QuizIcon },
                { id: 'discuss', label: 'ìƒê°í•´ ë³´ê¸°', subLabel: 'Food For Thought', icon: DiscussIcon },
            ];
            const getLevelColor = (code) => { if (LEVEL_STYLES[code]) return LEVEL_STYLES[code]; const base = code.substring(0, 2); return LEVEL_STYLES[base] || "bg-gray-50 text-slate-600 border-gray-100"; };
            const currentStyle = getLevelColor(userLevel);
            const bgClass = currentStyle.split(' ')[0];
            const textClass = currentStyle.split(' ')[1];
            const [tooltip, setTooltip] = useState({ show: false, x: 0, y: 0, info: null });
            const handleLevelTextEnter = (e) => { const rect = e.target.getBoundingClientRect(); setTooltip({ show: true, x: rect.right, y: rect.top, info: LEVEL_DEFINITIONS[userLevel] }); };
            const handleLevelTextLeave = () => { setTooltip(prev => ({ ...prev, show: false })); };

            // Sidebar scale logic
            const sidebarScale = isCollapsed ? SCALE_SIDEBAR_COLLAPSED : SCALE_SIDEBAR_EXPANDED;
            const sidebarFontSize = `calc(${BASE_CLAMP} * ${sidebarScale})`;
            const sidebarWidth = isCollapsed ? `${SIDEBAR_WIDTH_COLLAPSED_PX}px` : `${SIDEBAR_WIDTH_EXPANDED_PX}px`;

            return (
                <aside 
                    className={`bg-white border-r border-gray-200 fixed h-full hidden lg:flex flex-col z-50 transition-all duration-300 ease-in-out font-basic`}
                    style={{ width: sidebarWidth, fontSize: sidebarFontSize }}
                >
                    <div className={`p-6 flex items-center gap-3 relative ${isCollapsed ? 'justify-center px-0' : ''}`}>
                        <img src="https://raw.githubusercontent.com/openkoreanlearninglab/hub/refs/heads/main/OpenKoreanLearningLab_Logo.jpeg" alt="Logo" className={`rounded-2xl shadow-lg shrink-0 transition-all duration-300 object-cover ${isCollapsed ? 'w-[48px] h-[48px]' : 'w-[60px] h-[60px]'}`}/>
                        {!isCollapsed && (<div className="animate-fade-in overflow-hidden whitespace-nowrap flex flex-col justify-center"><span className="font-extrabold text-[20px] text-black leading-tight font-cafe24-deco">Open</span><span className={`font-bold text-[11px] leading-tight font-mustache ${textClass}`}>KoreanLearningLab</span></div>)}
                        <button onClick={toggleSidebar} className="absolute -right-3 top-1/2 -translate-y-1/2 bg-white border border-gray-200 rounded-full p-1 shadow-sm text-slate-500 hover:text-slate-700 hover:bg-gray-50 transition-colors z-10">{isCollapsed ? <ChevronRight className="w-3 h-3" /> : <ChevronLeft className="w-3 h-3" />}</button>
                    </div>
                    <nav className={`flex-1 space-y-3 mt-4 ${isCollapsed ? 'px-3' : 'px-3'}`}>
                        {menus.map((menu) => {
                            const IconComp = menu.icon; const isActive = activeTab === menu.id; const activeFontClass = isActive ? "font-cafe24-surround" : "font-cafe24";
                            return (
                                <button key={menu.id} onClick={() => { 
                                    setActiveTab(menu.id); 
                                    // Auto collapse logic for 'learn'
                                    if (menu.id === 'learn' && !isCollapsed) {
                                        toggleSidebar();
                                    } else if (menu.id !== 'learn' && isCollapsed) {
                                        // Optional: Auto expand for other tabs if desired, but user didn't explicitly ask for this. 
                                        // keeping original logic:
                                         toggleSidebar(); 
                                    }
                                }} onDoubleClick={toggleSidebar} className={`w-full flex items-center transition-all duration-200 group relative ${isCollapsed ? 'justify-center h-14 rounded-2xl' : 'gap-3 px-3 py-4 rounded-2xl'} ${isActive ? `bg-${themeColor}-50 text-${themeColor}-600` : 'text-slate-700 hover:bg-gray-50 hover:text-slate-900'}`}>
                                    {isActive && <div className={`absolute left-0 top-1/2 -translate-y-1/2 bg-${themeColor}-500 rounded-r-lg ${isCollapsed ? 'w-1.5 h-8' : 'w-1 h-6'}`}></div>}
                                    <IconComp className={`shrink-0 transition-all duration-200 ${isCollapsed ? 'w-8 h-8' : 'w-7 h-7'} ${isActive ? `text-${themeColor}-600` : 'text-slate-400 group-hover:text-slate-900'}`} filled={isActive} />
                                    {!isCollapsed && (<div className="flex flex-col items-start animate-fade-in overflow-hidden whitespace-nowrap"><span className={`text-[14px] leading-tight transition-all ${activeFontClass} ${isActive ? `font-extrabold text-${themeColor}-600` : 'font-medium text-slate-700 group-hover:font-semibold group-hover:text-slate-900'}`}>{menu.label}</span><span className="text-[10px] font-normal text-slate-400 mt-0.5 leading-tight">{menu.subLabel}</span></div>)}
                                    {isCollapsed && (<div className="absolute left-full ml-3 px-3 py-1.5 bg-slate-900 text-white rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50 shadow-xl flex flex-col items-start"><span className="text-xs font-bold">{menu.label}</span><span className="text-[10px] opacity-80">{menu.subLabel}</span><div className="absolute top-1/2 -left-1 -translate-y-1/2 w-2 h-2 bg-slate-900 rotate-45"></div></div>)}
                                </button>
                            );
                        })}
                    </nav>
                    <div className="p-2 border-t border-gray-100">
                        <div className={`flex items-center gap-3 p-2 rounded-xl transition-colors hover:bg-gray-50 cursor-pointer ${isCollapsed ? 'justify-center' : ''}`}>
                            <div className={`w-[44px] h-[44px] rounded-xl flex items-center justify-center shrink-0 transition-colors duration-300 ${bgClass} border ${currentStyle.split(' ')[2]}`}><span className={`text-[16px] font-extrabold font-school-smile ${currentStyle.replace('bg-', 'text-').replace('50', '600')}`}>{userLevel}</span></div>
                            {!isCollapsed && (<div className="animate-fade-in overflow-hidden whitespace-nowrap flex-1"><p className="text-sm font-bold text-slate-900 mb-[1px] font-basic">í•™ìŠµì(Learner)</p><div className="mt-[1px]"><span className={`block w-fit px-[2px] py-0.5 rounded text-[10px] font-semibold border uppercase tracking-wide shadow-sm text-left cursor-help font-basic ${currentStyle}`} onMouseEnter={handleLevelTextEnter} onMouseLeave={handleLevelTextLeave}>Level: {LEVEL_DEFINITIONS[userLevel].title}</span></div></div>)}
                        </div>
                    </div>
                    {tooltip.show && tooltip.info && createPortal(<div className="fixed z-[9999] pointer-events-none animate-fade-in" style={{ left: tooltip.x, top: tooltip.y }}><div className="relative bg-slate-900/95 backdrop-blur text-white text-xs rounded-xl p-4 shadow-2xl transform -translate-y-full -translate-x-6 -mt-3 w-64 border border-slate-700/50"><p className={`font-bold mb-1.5 text-sm text-${themeColor}-300`}>{userLevel} â€“ {tooltip.info.title}</p><p className="opacity-90 leading-relaxed font-medium text-slate-200">{tooltip.info.desc}</p><div className="absolute -bottom-1.5 left-4 w-3 h-3 bg-slate-900/95 border-r border-b border-slate-700/50 rotate-45"></div></div></div>, document.body)}
                </aside>
            );
        };

        const LevelBadge = ({ levelCode }) => {
            const [isHovered, setIsHovered] = useState(false);
            const info = LEVEL_DEFINITIONS[levelCode] || LEVEL_DEFINITIONS["A2+"];
            const getLevelStyle = (code) => { if (LEVEL_STYLES[code]) return LEVEL_STYLES[code]; const base = code.substring(0, 2); return LEVEL_STYLES[base] || "bg-gray-50 text-slate-600 border-gray-100"; };
            const badgeStyle = getLevelStyle(levelCode);
            return (
                <div className="relative inline-flex items-center cursor-help z-50" onMouseEnter={() => setIsHovered(true)} onMouseLeave={() => setIsHovered(false)}><span className={`px-2 py-0.5 rounded text-[10px] font-bold border uppercase tracking-wide shadow-sm font-sunflower ${badgeStyle}`}>Level: {info.title}</span>{isHovered && (<div className="absolute top-full left-0 mt-2 w-64 bg-slate-900/95 backdrop-blur text-white text-xs rounded-xl p-4 shadow-xl z-[100] animate-fade-in text-left"><p className={`font-bold mb-1.5 text-sm ${badgeStyle.split(' ')[1]}`}>{levelCode} â€“ {info.title}</p><p className="opacity-90 leading-relaxed font-medium">{info.desc}</p><div className="absolute -top-1 left-4 w-2 h-2 bg-slate-900/95 rotate-45"></div></div>)}</div>
            );
        };

        const callGeminiWithBackoff = async (payload) => {
            const apiKey = ""; const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`; const delays = [1000, 2000, 4000, 8000, 16000];
            for (let i = 0; i <= delays.length; i++) { try { const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) }); if (!response.ok) throw new Error(`API error: ${response.statusText}`); return await response.json(); } catch (error) { if (i === delays.length) throw error; await new Promise(resolve => setTimeout(resolve, delays[i])); } }
        };

        const FeedbackSection = ({ value, onChange, placeholder, question, keyPhrases, themeColor }) => {
            const [feedback, setFeedback] = useState(null); const [isLoading, setIsLoading] = useState(false); const [error, setError] = useState(null);
            const checkSentence = async () => {
                if (!value || value.trim() === '') { setError("ë¬¸ì¥ì„ ì…ë ¥í•´ì•¼ í”¼ë“œë°±ì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”."); setFeedback(null); return; }
                setIsLoading(true); setError(null); setFeedback(null);
                const systemPrompt = `You are an advanced Korean language tutor AI for A2 level learners...`; 
                const payload = { contents: [{ role: "user", parts: [{ text: systemPrompt }, { text: `Question: "${question}"\nUser's Answer: "${value}"` }] }], generationConfig: { responseMimeType: "application/json", responseSchema: { type: "OBJECT", properties: { "is_relevant": { "type": "BOOLEAN" }, "relevance_feedback_eng": { "type": "STRING", "nullable": true }, "is_correct": { "type": "BOOLEAN", "nullable": true }, "feedback_message_eng": { "type": "STRING", "nullable": true }, "corrected_sentence": { "type": "STRING", "nullable": true }, "explanation_eng": { "type": "STRING", "nullable": true } } } } };
                try { const result = await callGeminiWithBackoff(payload); if (result.candidates?.[0]?.content?.parts?.[0]?.text) setFeedback(JSON.parse(result.candidates[0].content.parts[0].text)); else setError("AIì˜ ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” ë° ë¬¸ì œê°€ ë°œìƒí–ˆì–´ìš”."); } catch (err) { setError("ë¬¸ì¥ ê²€ì‚¬ì— ì‹¤íŒ¨í–ˆì–´ìš”. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”."); } finally { setIsLoading(false); }
            };
            return (
                <div>
                    {keyPhrases}
                    <div>
                        <h4 className="font-bold text-slate-900 mb-3 text-base">í•µì‹¬ í‘œí˜„ì„ ì‚¬ìš©í•´ì„œ ì§ˆë¬¸ì— ëŒ€ë‹µí•´ ë³´ì„¸ìš”.</h4>
                        <textarea value={value} onChange={onChange} placeholder={placeholder} className={`w-full p-4 rounded-xl border border-gray-200 focus:border-${themeColor}-500 focus:ring-1 focus:ring-${themeColor}-500 outline-none min-h-[120px] resize-none text-base text-slate-800 placeholder-gray-400 mb-3`}></textarea>
                        <button onClick={checkSentence} disabled={!value.trim() || isLoading} className={`flex items-center gap-2 px-5 py-[6px] text-[12px] leading-[12px] rounded-xl font-bold transition-all shadow-sm ${!value.trim() || isLoading ? 'bg-gray-100 text-slate-400 cursor-not-allowed' : 'bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-md'}`}>{isLoading ? <span>ë¶„ì„ ì¤‘...</span> : <> <SparklesIcon className="w-5 h-5" /> <span>AI Feedback (í”¼ë“œë°± ë°›ê¸°)</span> </>}</button>
                        {error && <div className="mt-4 p-4 bg-red-50 text-red-600 rounded-xl border border-red-200 text-sm font-medium animate-fade-in">{error}</div>}
                        {feedback && (
                            <div className={`mt-6 rounded-2xl p-6 border animate-fade-in ${feedback.is_correct ? `bg-${themeColor}-50 border-${themeColor}-200` : 'bg-yellow-50 border-yellow-200'}`}>
                                <div className="flex items-center gap-2 mb-4"><span className="text-2xl">ğŸ¤–</span><h4 className="font-extrabold text-slate-900 text-lg">AI Tutor Feedback</h4></div>
                                <div className="mb-4"><span className={`font-black text-sm px-3 py-1 rounded-full bg-white border shadow-sm ${feedback.is_correct ? `text-${themeColor}-600 border-${themeColor}-200` : 'text-yellow-600 border-yellow-200'}`}>{feedback.is_correct ? 'ğŸ‰ Great Job!' : 'âš ï¸ Needs Improvement'}</span></div>
                                <div className="space-y-4">{feedback.feedback_message_eng && <div className="flex flex-col sm:flex-row gap-1 sm:gap-4"><span className="font-bold text-slate-500 text-sm sm:w-24 shrink-0">Feedback</span><p className="text-slate-800 text-sm font-medium leading-relaxed">{feedback.feedback_message_eng}</p></div>}{feedback.explanation_eng && <div className="flex flex-col sm:flex-row gap-1 sm:gap-4"><span className="font-bold text-slate-500 text-sm sm:w-24 shrink-0">Explanation</span><p className="text-slate-800 text-sm font-medium leading-relaxed">{feedback.explanation_eng}</p></div>}{feedback.corrected_sentence && <div className="flex flex-col sm:flex-row gap-1 sm:gap-4"><span className="font-bold text-slate-500 text-sm sm:w-24 shrink-0">Correction</span><p className="text-slate-900 text-lg font-black leading-relaxed">{feedback.corrected_sentence}</p></div>}</div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const VocabCard = ({ word, themeColor }) => {
            const [isOpen, setIsOpen] = useState(false);
            return (
                <div className="bg-white p-6 rounded-2xl border border-gray-200 shadow-sm hover:shadow-md transition-all h-full flex flex-col">
                    <div className="flex justify-between mb-4"><h3 className="text-[24px] font-extrabold text-slate-900">{word.term}</h3></div>
                    <div className={`pl-4 border-l-4 border-${themeColor}-500 mb-6`}><p className="text-[21px] text-slate-600 font-medium font-diary">{word.mainDef}</p></div>
                    <div className="flex-1 flex flex-col">
                        <button onClick={() => setIsOpen(!isOpen)} className="w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 rounded-xl transition-all group border border-transparent hover:border-gray-200"><div className="flex items-center gap-2"><span className={`w-1.5 h-1.5 rounded-full transition-colors duration-300 ${isOpen ? `bg-${themeColor}-500` : 'bg-gray-400'}`}></span><span className={`text-[12px] font-bold uppercase tracking-wider transition-colors duration-300 ${isOpen ? `text-${themeColor}-700` : 'text-slate-500'}`}>Examples (ì˜ˆë¬¸)</span></div><ChevronRight className={`w-4 h-4 text-slate-400 transition-transform duration-300 ${isOpen ? 'rotate-90' : ''}`} /></button>
                        <div className={`overflow-hidden transition-all duration-300 ease-in-out ${isOpen ? 'max-h-96 opacity-100 mt-2' : 'max-h-0 opacity-0'}`}><div className="bg-gray-50 rounded-xl p-4 space-y-3 border border-gray-100">{word.examples.map((ex, i) => (<div key={i}><p className="font-bold text-slate-800 text-[19px] leading-relaxed font-marker">{ex.kor}</p><p className="text-slate-500 text-[17px] mt-0.5 font-gowoonbam">{ex.eng}</p></div>))}</div></div>
                        {word.subDefs && word.subDefs.length > 0 && (<div className={`bg-${themeColor}-50 rounded-xl p-5 space-y-2 border border-${themeColor}-100 mt-4`}><h4 className={`font-bold text-${themeColor}-800 text-[12px] mb-2 flex items-center gap-2 uppercase tracking-wider`}><span className={`w-1.5 h-1.5 rounded-full bg-${themeColor}-400`}></span>Related & Grammar</h4>{word.subDefs.map((sub, i) => (<div key={i} className="flex flex-col"><span className={`font-bold text-${themeColor}-900 text-[20px] font-school-free`}>{sub.subTerm}</span><span className={`text-[19px] text-${themeColor}-600 font-dictation`}>{sub.subDef}</span></div>))}</div>)}
                    </div>
                </div>
            );
        };

        const HomeView = ({ setActiveTab, progress, userLevel, themeColor }) => {
            const completedCount = Object.values(progress).filter(val => val === true || (typeof val === 'number' && val > 0)).length;
            const percentage = Math.round((completedCount / 4) * 100);
            const quizScoreDisplay = typeof progress.quiz === 'number' ? `${progress.quiz}%` : (progress.quiz ? '100%' : '0%');
            const quizColorClass = (progress.quiz === 100 || progress.quiz === true) ? `text-${themeColor}-600` : 'text-slate-900';
            const quizIconBg = (progress.quiz === 100 || progress.quiz === true) ? `bg-${themeColor}-100 text-${themeColor}-600` : `bg-${themeColor}-50 text-${themeColor}-600`;

            return (
                <div 
                    className="space-y-10 animate-fade-in max-w-7xl mx-auto"
                    style={{ fontSize: `calc(${BASE_CLAMP} * ${SCALE_PAGE_HOME})` }}
                >
                    <div className="space-y-3">
                        <div className="flex items-center gap-2"><span className={`px-2 py-1 bg-${themeColor}-100 text-${themeColor}-700 text-[12px] font-extrabold rounded-md tracking-wider font-juache`}>íŒŸìºìŠ¤íŠ¸ (Podcast)</span><span className={`text-[12px] font-bold text-${themeColor}-600 tracking-wide uppercase font-school-smile`}>ì´ ì£¼ì œë¡œ ì´ì•¼ê¸°í•´ ë´ìš”! (Let's talk about this topic)</span></div>
                        <h1 className="text-5xl font-black text-slate-900 tracking-tight font-cafe24-surround">ì™¼ì†ì¡ì´ì— ëŒ€í•œ ì˜¤í•´ì™€ ì§„ì‹¤</h1>
                        <p className="text-slate-500 text-lg font-cafe24-surround">Misconceptions and Truths about Left-Handedness</p>
                    </div>
                    <div className="bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden flex flex-col md:flex-row h-auto md:h-80">
                        <div className="md:w-5/12 relative group bg-black cursor-pointer overflow-hidden" onClick={() => setActiveTab('learn')}>
                            <img src="https://img.youtube.com/vi/YTVDuOi6L1c/maxresdefault.jpg" alt="Thumbnail" className="w-full h-full object-cover opacity-80 group-hover:opacity-60 transition-opacity duration-300" />
                            <div className="absolute top-6 left-6"><span className="bg-[#ea3323] text-white text-[10px] font-bold px-2 py-1 rounded border border-[#ea3323] shadow-sm tracking-wider">ON AIR</span></div>
                            <div className="absolute inset-0 flex items-center justify-center"><div className="w-14 h-14 bg-white rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300"><PlayIconLine className={`w-6 h-6 text-${themeColor}-600 fill-current ml-1`} /></div></div>
                        </div>
                        <div className="md:w-7/12 p-8 md:p-10 flex flex-col justify-center">
                            <div className="flex items-center gap-2 mb-4"><span className="px-2 py-1 bg-gray-100 text-slate-600 text-[10px] font-bold rounded uppercase tracking-wide">Listening</span><LevelBadge levelCode={userLevel} /></div>
                            <div className="mb-3"><h2 className="text-2xl font-black text-slate-900 font-cafe24-surround">ë™ì˜ìƒ ìë£Œ</h2><span className="text-sm font-bold text-slate-400 font-cafe24-surround">Video Resources</span></div>
                            <div className="text-slate-600 text-sm leading-relaxed mb-8 pr-4"><p>íŒŸìºìŠ¤íŠ¸ë¥¼ ë“£ê³  ì™¼ì†ì¡ì´ì— ëŒ€í•œ ì˜¤í•´ì™€ ì§„ì‹¤ì„ ì•Œì•„ë³´ì„¸ìš”.</p><p className="mt-1 text-slate-400 text-xs">Listen to the podcast and learn about misconceptions and truths regarding left-handedness.</p></div>
                            <div className="flex items-center gap-3"><button onClick={() => setActiveTab('learn')} className="px-6 py-3 bg-[#111827] text-white rounded-xl hover:bg-black transition-colors shadow-md flex flex-col items-center leading-tight"><span className="text-sm font-bold">ë™ì˜ìƒ ë³´ëŸ¬ ê°€ê¸°</span><span className="text-[10px] opacity-70 font-medium">Watch Video</span></button></div>
                        </div>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div className="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm flex flex-col justify-between min-h-[160px] h-full hover:shadow-md transition-shadow">
                            <div className="flex justify-between items-start"><div><div className="flex flex-col"><span className="text-xs font-bold text-slate-500 font-cafe24-surround">í•µì‹¬ ì–´íœ˜</span><span className="text-[10px] text-slate-400 font-medium font-cafe24-surround">Key Vocabulary</span></div><p className="text-4xl font-black text-slate-900 mt-1 font-jua">{VOCAB_DATA.length}ê°œ</p></div><div className={`w-10 h-10 bg-${themeColor}-50 text-${themeColor}-600 rounded-xl flex items-center justify-center`}><VocabIcon className="w-5 h-5" /></div></div>
                            <button onClick={() => setActiveTab('vocab')} className="group flex items-center gap-1 transition-colors"><div className="flex flex-col items-start"><span className={`text-xs font-bold text-slate-400 group-hover:text-${themeColor}-600`}>í•µì‹¬ ì–´íœ˜ í™•ì¸</span><span className={`text-[10px] text-slate-300 group-hover:text-${themeColor}-400 font-medium`}>Check Vocabulary</span></div><span className={`text-lg leading-none text-slate-400 group-hover:text-${themeColor}-600 ml-1`}>â†’</span></button>
                        </div>
                        <div className="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm flex flex-col justify-between min-h-[160px] h-full hover:shadow-md transition-shadow">
                            <div className="flex justify-between items-start"><div><div className="flex flex-col"><span className="text-xs font-bold text-slate-500 font-cafe24-surround">ë‚´ìš© í™•ì¸ í€´ì¦ˆ</span><span className="text-[10px] text-slate-400 font-medium font-cafe24-surround">Comprehension Quiz</span></div><p className={`text-4xl font-black mt-1 transition-all duration-500 font-jua ${quizColorClass}`}>{quizScoreDisplay}</p></div><div className={`w-10 h-10 rounded-xl flex items-center justify-center transition-colors ${quizIconBg}`}><QuizIcon className="w-5 h-5" /></div></div>
                            <button onClick={() => setActiveTab('quiz')} className="group flex items-center gap-1 transition-colors"><div className="flex flex-col items-start"><span className={`text-xs font-bold text-slate-400 group-hover:text-${themeColor}-600`}>í€´ì¦ˆ ì‹œì‘í•˜ê¸°</span><span className={`text-[10px] text-slate-300 group-hover:text-${themeColor}-400 font-medium`}>Start Quiz</span></div><span className={`text-lg leading-none text-slate-400 group-hover:text-${themeColor}-600 ml-1`}>â†’</span></button>
                        </div>
                        <div className="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm flex flex-col justify-between min-h-[160px] h-full hover:shadow-md transition-shadow">
                            <div className="flex justify-between items-start"><div><div className="flex flex-col"><span className="text-xs font-bold text-slate-500 font-cafe24-surround">ìƒê°í•´ ë³´ê¸°</span><span className="text-[10px] text-slate-400 font-medium font-cafe24-surround">Food For Thought</span></div><div className="flex flex-col mt-3"><a href="https://gemini.google.com/share/e908b20b6da0" target="_blank" rel="noopener noreferrer" className={`text-[17px] font-black text-${themeColor}-600 hover:text-${themeColor}-800 hover:underline transition-colors flex items-center gap-1 leading-tight`}>Gemini AI Feedback<ExternalLinkIcon className="w-4 h-4" /></a></div></div><div className={`w-10 h-10 bg-${themeColor}-50 text-${themeColor}-600 rounded-xl flex items-center justify-center`}><DiscussIcon className="w-5 h-5" /></div></div>
                            <button onClick={() => setActiveTab('discuss')} className="group flex items-center gap-1 transition-colors"><div className="flex flex-col items-start"><span className="text-xs font-bold text-slate-400 group-hover:text-blue-600">ë‹¤ìŒ ì§ˆë¬¸ë“¤ì„ ìƒê°í•´ ë³´ì„¸ìš”.</span><span className="text-[10px] text-slate-300 group-hover:text-blue-400 font-medium">Have a think about the following questions.</span></div><span className="text-lg leading-none text-slate-400 group-hover:text-blue-600 ml-1">â†’</span></button>
                        </div>
                    </div>
                </div>
            );
        };

        const VocabView = ({ updateProgress, themeColor }) => {
            useEffect(() => { updateProgress('vocab'); }, []);
            return (
            <div 
                className="max-w-7xl animate-fade-in mx-auto"
                style={{ fontSize: `calc(${BASE_CLAMP} * ${SCALE_PAGE_VOCAB})` }}
            >
                <div className="flex items-center gap-4 mb-8"><div className={`w-16 h-16 bg-${themeColor}-100 rounded-2xl flex items-center justify-center shrink-0`}><VocabIcon className={`w-10 h-10 text-${themeColor}-600`} /></div><div className="flex flex-col"><h2 className="text-3xl font-black text-slate-900 font-cafe24-surround">í•µì‹¬ ì–´íœ˜</h2><span className="text-base text-slate-500 font-medium font-cafe24-surround">Key Vocabulary</span></div></div>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">{VOCAB_DATA.map((word, idx) => (<VocabCard key={idx} word={word} themeColor={themeColor} />))}</div>
            </div>
            );
        };

        const QuizView = ({ updateProgress, themeColor }) => {
            const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
            const [answers, setAnswers] = useState({});
            const [firstAttempts, setFirstAttempts] = useState({}); 
            const [showHint, setShowHint] = useState(false);
            const [showTranslation, setShowTranslation] = useState(false);
            const [isFinished, setIsFinished] = useState(false);
            const currentQuestion = QUIZ_LIST[currentQuestionIndex];
            const shuffledOptions = useMemo(() => [...currentQuestion.options].sort(() => Math.random() - 0.5), [currentQuestion]);
            const selectedOption = answers[currentQuestionIndex] || null;
            const isCorrect = selectedOption?.isCorrect;

            const handleOptionClick = (option) => { 
                if (firstAttempts[currentQuestionIndex] === undefined) {
                    setFirstAttempts(prev => ({ ...prev, [currentQuestionIndex]: option.isCorrect }));
                }
                setAnswers(prev => ({ ...prev, [currentQuestionIndex]: option })); 
                setShowHint(false); 
            };
            const handlePrev = () => { if (currentQuestionIndex > 0) { setCurrentQuestionIndex(prev => prev - 1); setShowHint(false); setShowTranslation(false); } };
            const handleNext = () => { if (currentQuestionIndex < QUIZ_LIST.length - 1) { setCurrentQuestionIndex(prev => prev + 1); setShowHint(false); setShowTranslation(false); } else { finishQuiz(); } };
            const finishQuiz = () => { setIsFinished(true); const totalQuestions = QUIZ_LIST.length; const correctCount = Object.values(firstAttempts).filter(isCorrect => isCorrect === true).length; const finalScore = Math.round((correctCount / totalQuestions) * 100); updateProgress('quiz', finalScore); };
            const handleRetry = () => { setCurrentQuestionIndex(0); setAnswers({}); setFirstAttempts({}); setIsFinished(false); updateProgress('quiz', 0); };

            if (isFinished) {
                const correctCount = Object.values(firstAttempts).filter(isCorrect => isCorrect === true).length;
                return (
                    <div className="max-w-7xl animate-fade-in mx-auto text-center py-10" style={{ fontSize: `calc(${BASE_CLAMP} * ${SCALE_PAGE_QUIZ})` }}>
                        <div className="bg-white rounded-3xl border border-gray-200 shadow-sm p-10">
                            <div className={`w-20 h-20 bg-${themeColor}-100 text-${themeColor}-600 rounded-full flex items-center justify-center mx-auto mb-6`}><QuizIcon className="w-10 h-10" /></div>
                            <h2 className="text-3xl font-black text-slate-900 mb-2 font-cafe24-surround">í€´ì¦ˆ ì™„ë£Œ!</h2>
                            <p className="text-slate-500 mb-8">ì´ {QUIZ_LIST.length}ë¬¸ì œ ì¤‘ {correctCount}ë¬¸ì œë¥¼ í•œ ë²ˆì— ë§í˜”ìŠµë‹ˆë‹¤.</p>
                            <div className={`text-5xl font-black text-${themeColor}-600 mb-10 font-school-smile`}>{Math.round((correctCount / QUIZ_LIST.length) * 100)}%</div>
                            <button onClick={handleRetry} className={`px-8 py-3 rounded-xl bg-${themeColor}-600 text-white font-bold hover:bg-${themeColor}-700 transition-colors`}>ë‹¤ì‹œ í’€ê¸° (Try Again)</button>
                        </div>
                    </div>
                );
            }

            return (
                <div 
                    className="max-w-7xl animate-fade-in mx-auto"
                    style={{ fontSize: `calc(${BASE_CLAMP} * ${SCALE_PAGE_QUIZ})` }}
                >
                    <div className="flex items-center gap-4 mb-6"><div className={`w-16 h-16 bg-${themeColor}-100 rounded-2xl flex items-center justify-center shrink-0`}><QuizIcon className="w-10 h-10 text-current" /></div><div className="flex flex-col"><h2 className="text-3xl font-black text-slate-900 font-cafe24-surround">ë‚´ìš© í™•ì¸ í€´ì¦ˆ</h2><span className="text-base text-slate-500 font-medium font-cafe24-surround">Comprehension Quiz ({currentQuestionIndex + 1}/{QUIZ_LIST.length})</span></div></div>
                    <div className="mb-6 p-4 bg-gray-50 rounded-xl border border-gray-200"><p className="font-bold text-slate-800">ë‹¤ìŒ ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”.</p><p className="text-slate-500 text-sm">Choose the correct word for the blank.</p></div>
                    <div className="bg-white rounded-2xl border border-gray-200 shadow-sm p-2">
                        <div className="flex items-start gap-3 p-4"><span className={`bg-${themeColor}-100 text-${themeColor}-700 font-black rounded-lg px-2 py-1 text-sm shrink-0`}>Q{currentQuestion.id}</span><div className="flex flex-col"><h3 className="font-bold text-slate-900 text-lg leading-snug">{currentQuestion.questionKor}</h3><p className="text-slate-500 font-medium text-sm mt-1">{currentQuestion.questionEng}</p></div></div>
                        <div className="bg-gray-50 rounded-xl p-4 mb-4 mx-1">
                            <div>
                                <div className="leading-relaxed text-xl font-bold text-slate-900">
                                    {currentQuestion.sentence_pre}
                                    <div className={`inline-flex align-middle mx-2 px-4 py-1 rounded-md font-bold text-xl transition-all duration-300 min-w-[80px] text-center border-b-2 ${isCorrect ? `bg-${themeColor}-50 text-${themeColor}-700 border-${themeColor}-500` : (showHint ? 'bg-yellow-100 text-yellow-800 border-yellow-400' : (selectedOption ? 'bg-red-50 text-red-700 border-red-500' : 'bg-yellow-100 text-transparent border-yellow-400 select-none'))}`}>{isCorrect ? selectedOption.text : (showHint ? `[ ${currentQuestion.hint} ]` : (selectedOption ? selectedOption.text : "___"))}</div>
                                    {currentQuestion.sentence_post}{selectedOption && (<span className={`ml-2 text-lg ${isCorrect ? `text-${themeColor}-600` : 'text-red-600'}`}>{isCorrect ? 'âœ“' : 'âœ—'}</span>)}
                                </div>
                                {showTranslation && (
                                    <div className="mt-4 pt-4 border-t border-gray-200 text-slate-500 text-sm animate-fade-in font-medium">
                                        {currentQuestion.translation_pre}
                                        <span className={`font-bold transition-colors duration-300 ${isCorrect ? `text-${themeColor}-600 underline decoration-2 underline-offset-2` : 'text-slate-300 bg-slate-100 rounded px-1'}`}>
                                            {isCorrect ? currentQuestion.translation_answer : "______"}
                                        </span>
                                        {currentQuestion.translation_post}
                                    </div>
                                )}
                            </div>
                        </div>
                        <div className="flex gap-2 mb-4 px-2"><button onClick={() => { setShowHint(!showHint); }} disabled={selectedOption?.isCorrect} className={`px-3 py-1.5 rounded-lg text-xs font-bold transition-colors ${selectedOption?.isCorrect ? 'opacity-50 cursor-not-allowed bg-gray-100 text-slate-400' : (showHint ? 'bg-yellow-200 text-yellow-800 ring-2 ring-yellow-400' : 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200')}`}>íŒíŠ¸ (Hint)</button><button onClick={() => setShowTranslation(!showTranslation)} className="inline-flex items-center gap-1 text-[8px] font-normal text-slate-400 hover:text-slate-600 font-cafe24 bg-transparent transition-colors"><TranslateIcon className="w-3 h-3" /><span>{showTranslation ? 'English ìˆ¨ê¸°ê¸° (Hide)' : 'English'}</span></button></div>
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4 px-2">{shuffledOptions.map((option, idx) => { 
                            const isSelected = selectedOption === option; 
                            let btnClass = "bg-white border-gray-200 text-slate-700 hover:bg-gray-50 hover:border-gray-300"; 
                            if (isSelected) { 
                                if (option.isCorrect) { 
                                    btnClass = `bg-${themeColor}-500 border-${themeColor}-600 text-white shadow-md ring-2 ring-${themeColor}-200`; 
                                } else { 
                                    btnClass = "bg-red-500 border-red-600 text-white shadow-md ring-2 ring-red-200"; 
                                } 
                            } 
                            return (<button key={idx} onClick={() => handleOptionClick(option)} className={`py-3 px-4 rounded-xl border font-bold text-base transition-all duration-200 ${btnClass}`}>{option.text}</button>); 
                        })}</div>
                        {selectedOption && (
                            <div className={`p-4 rounded-xl border-l-4 mb-4 mx-2 animate-fade-in shadow-sm ${isCorrect ? `bg-${themeColor}-50 border-${themeColor}-500` : 'bg-red-50 border-red-500'}`}>
                                <h4 className={`font-bold text-sm mb-1 ${isCorrect ? `text-${themeColor}-800` : 'text-red-800'}`}>{isCorrect ? 'Correct!' : 'Try again.'}</h4>
                                <p className={`text-sm italic ${isCorrect ? `text-${themeColor}-700` : 'text-red-700'}`}>{selectedOption.feedback}</p>
                            </div>
                        )}
                        <div className="flex justify-between items-center mt-4 border-t border-gray-100 pt-4 px-2 pb-2"><button onClick={handlePrev} disabled={currentQuestionIndex === 0} className={`px-6 py-1 rounded-xl font-bold flex items-center gap-2 transition-colors ${currentQuestionIndex === 0 ? 'text-slate-300 cursor-not-allowed' : 'text-slate-600 hover:bg-gray-100'}`}><span className="text-lg">â†</span><span className="text-xs">ì´ì „ ë¬¸ì œ (Prev)</span></button><span className="text-xs font-bold text-slate-600">{currentQuestionIndex + 1} / {QUIZ_LIST.length}</span><button onClick={handleNext} disabled={!isCorrect} className={`px-6 py-1 rounded-xl font-bold flex items-center gap-2 shadow-md transition-colors ${!isCorrect ? 'bg-gray-300 text-slate-500 cursor-not-allowed' : 'bg-gray-900 text-white hover:bg-black'}`}><span className="text-xs">{currentQuestionIndex < QUIZ_LIST.length - 1 ? 'ë‹¤ìŒ ë¬¸ì œ (Next)' : 'ê²°ê³¼ ë³´ê¸° (Finish)'}</span><span className="text-lg">â†’</span></button></div>
                    </div>
                </div>
            );
        };

        const DiscussView = ({ updateProgress, themeColor }) => {
            const [answers, setAnswers] = useState({});
            const [showTranslations, setShowTranslations] = useState({});
            const handleTextChange = (id, value) => { setAnswers(prev => ({ ...prev, [id]: value })); };
            const toggleTranslation = (id) => { setShowTranslations(prev => ({ ...prev, [id]: !prev[id] })); };
            
            return (
                <div 
                    className="max-w-7xl mx-auto animate-fade-in"
                    style={{ fontSize: `calc(${BASE_CLAMP} * ${SCALE_PAGE_DISCUSS})` }}
                >
                    <div className="flex items-center gap-4 mb-8"><div className={`w-16 h-16 bg-${themeColor}-100 rounded-2xl flex items-center justify-center shrink-0`}><DiscussIcon className="w-10 h-10 text-current" /></div><div className="flex flex-col"><h2 className="text-3xl font-black text-slate-900 font-cafe24-surround">ìƒê°í•´ ë³´ê¸°</h2><span className="text-base text-slate-500 font-medium font-cafe24-surround">Food For Thought</span></div></div>
                    <div className={`mb-8 p-4 rounded-2xl bg-${themeColor}-50 border border-${themeColor}-100`}><div className="text-slate-800 text-sm font-medium leading-relaxed"><p>AI Feedbackì€ Gemini ì›¹í˜ì´ì§€ì—ì„œë§Œ ì‘ìš©í•˜ê¸° ë•Œë¬¸ì— Github ì›¹í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ì–´ìš”.</p><p className="text-slate-500 text-xs mt-1 mb-4">AI Feedback only works on the Gemini webpage, so it cannot be used on the GitHub webpage.</p><p className="flex flex-wrap items-center gap-1">AI Feedback ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ì›í•  ê²½ìš°, ë‹¤ìŒ ë§í¬ë¥¼ í´ë¦­í•˜ì„¸ìš”: <a href="https://gemini.google.com/share/e908b20b6da0" target="_blank" rel="noopener noreferrer" className={`font-bold text-${themeColor}-600 hover:underline inline-flex items-center gap-0.5`}>Gemini AI Feedback<ExternalLinkIcon className="w-3 h-3" /></a></p><p className="text-slate-500 text-xs mt-1 flex flex-wrap items-center gap-1">To use the AI feedback feature, please click the following link: <a href="https://gemini.google.com/share/e908b20b6da0" target="_blank" rel="noopener noreferrer" className={`font-bold text-${themeColor}-600 hover:underline inline-flex items-center gap-0.5`}>Gemini AI Feedback<ExternalLinkIcon className="w-3 h-3" /></a></p></div></div>
                    <div className="bg-white rounded-3xl border border-gray-200 shadow-sm p-8 md:p-10">
                        {DISCUSS_DATA.map((item, index) => (
                            <div key={item.id} className={index < DISCUSS_DATA.length - 1 ? "mb-12 border-b border-gray-100 pb-12" : "mb-8"}>
                                <div className="mb-8"><h3 className="text-xl font-bold text-slate-900 mb-2">{item.question}</h3>{showTranslations[item.id] && (<p className="text-slate-500 text-sm mb-3 animate-fade-in font-medium">{item.translation}</p>)}<button onClick={() => toggleTranslation(item.id)} className="inline-flex items-center gap-1 text-[8px] font-normal text-slate-400 hover:text-slate-600 font-cafe24 bg-transparent transition-colors"><TranslateIcon className="w-3 h-3" /><span>{showTranslations[item.id] ? 'English ìˆ¨ê¸°ê¸° (Hide)' : 'English'}</span></button></div>
                                <FeedbackSection themeColor={themeColor} question={item.question} value={answers[item.id] || ''} onChange={(e) => handleTextChange(item.id, e.target.value)} placeholder="ì—¬ê¸°ì— ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš” (Type your response here)" keyPhrases={<div className="mb-10 space-y-4"><div className="flex items-center gap-2"><span className="text-red-500 text-lg">ğŸ“</span><h4 className="font-bold text-slate-900 text-lg">í•µì‹¬ í‘œí˜„ (Essential phrases)</h4></div><div className="space-y-4 pl-1">{item.keyVocab.map((v, i) => (<div key={i} className={`pl-4 border-l-4 border-${themeColor}-500`}><p className="text-slate-700"><span className={`text-${themeColor}-600 font-bold text-lg mr-2`}>{v.term}:</span><span>{v.meaning_eng}</span></p></div>))}</div></div>} />
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const LearnView = ({ updateProgress, themeColor, autoScroll, showVocab, playbackRate, layoutMode, onPlayerReady, onPlayerStateChange, onTimeUpdate }) => {
            const [player, setPlayer] = useState(null); const playerRef = useRef(null); const [currentTime, setCurrentTime] = useState(0); const [activeLine, setActiveLine] = useState(null); const [translations, setTranslations] = useState({}); const [popup, setPopup] = useState({ show: false, fixed: false, data: null, x: 0, y: 0 }); const [activeVocabTerm, setActiveVocabTerm] = useState(null); const [isLoading, setIsLoading] = useState(true); const sidebarVocabRefs = useRef({}); const scriptRefs = useRef({}); const intervalRef = useRef(null);

            useEffect(() => {
                const loadVideo = () => { if (window.YT && window.YT.Player) { new window.YT.Player('youtube-player', { videoId: 'YTVDuOi6L1c', width: '100%', height: '100%', playerVars: { 'autoplay': 0, 'controls': 1, 'rel': 0 }, events: { 'onReady': (event) => { playerRef.current = event.target; setPlayer(event.target); setIsLoading(false); if (onPlayerReady) onPlayerReady(event.target); }, 'onStateChange': (event) => { if (event.data === window.YT.PlayerState.PLAYING) { startInterval(); updateProgress('learn'); } else { stopInterval(); } if (onPlayerStateChange) onPlayerStateChange(event); } } }); } };
                if (!window.YT) { const tag = document.createElement('script'); tag.src = "https://www.youtube.com/iframe_api"; const firstScriptTag = document.getElementsByTagName('script')[0]; firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); window.onYouTubeIframeAPIReady = loadVideo; } else { loadVideo(); }
                return () => stopInterval();
            }, []);

            useEffect(() => { if (player && player.setPlaybackRate) player.setPlaybackRate(playbackRate); }, [playbackRate, player]);

            const startInterval = () => { stopInterval(); const updateTime = () => { const p = playerRef.current; if (p && p.getCurrentTime) { const time = p.getCurrentTime(); setCurrentTime(time); if (onTimeUpdate) onTimeUpdate(time); const currentLine = SCRIPT_DATA.find(line => time >= line.time[0] && time < line.time[1]); if (currentLine) { setActiveLine(currentLine.id); } } intervalRef.current = requestAnimationFrame(updateTime); }; intervalRef.current = requestAnimationFrame(updateTime); };
            const stopInterval = () => { if (intervalRef.current) { cancelAnimationFrame(intervalRef.current); intervalRef.current = null; } };
            
            useEffect(() => { if (popup.show) return; if (activeLine && autoScroll && scriptRefs.current[activeLine]) { scriptRefs.current[activeLine].scrollIntoView({ behavior: 'smooth', block: 'center' }); } }, [activeLine, autoScroll, popup.show]);

            const handleLineClick = (time) => { if (player) { player.seekTo(time, true); player.playVideo(); } };
            const toggleTranslation = (id) => setTranslations(prev => ({...prev, [id]: !prev[id]}));
            const scrollToVocab = (term) => { const element = sidebarVocabRefs.current[term]; if (element) element.scrollIntoView({ behavior: 'smooth', block: 'center' }); };

            const handleVocabEnter = (e, wordData) => { if (popup.fixed) return; const rect = e.target.getBoundingClientRect(); setPopup({ show: true, fixed: false, data: wordData, x: rect.left + rect.width / 2, y: rect.bottom }); if (showVocab) { setActiveVocabTerm(wordData.term); scrollToVocab(wordData.term); } };
            const handleVocabLeave = () => { if (popup.fixed) return; setPopup(prev => ({ ...prev, show: false })); };
            const handleVocabClick = (e, wordData) => { e.stopPropagation(); if (popup.fixed && popup.data && popup.data.term === wordData.term) { setPopup(prev => ({ ...prev, show: false, fixed: false })); return; } const rect = e.target.getBoundingClientRect(); setPopup({ show: true, fixed: true, data: wordData, x: rect.left + rect.width / 2, y: rect.bottom }); if (showVocab) { setActiveVocabTerm(wordData.term); scrollToVocab(wordData.term); } };

            const renderTextWithVocab = (text) => {
                const allTerms = VOCAB_DATA.flatMap(vocab => { const terms = [vocab.term]; if (vocab.variants) terms.push(...vocab.variants); if (vocab.subDefs) terms.push(...vocab.subDefs.map(s => s.subTerm)); return terms.map(term => ({ term, vocab })); }).sort((a, b) => b.term.length - a.term.length);
                const matches = []; allTerms.forEach(({ term, vocab }) => { let index = 0; while ((index = text.indexOf(term, index)) !== -1) { const end = index + term.length; const overlaps = matches.some(m => (index >= m.start && index < m.end) || (end > m.start && end <= m.end)); if (!overlaps) matches.push({ start: index, end, term, vocab }); index = end; } }); matches.sort((a, b) => a.start - b.start);
                const result = []; let lastIndex = 0; matches.forEach((match, idx) => { if (match.start > lastIndex) result.push(text.substring(lastIndex, match.start)); result.push({ isVocab: true, ...match.vocab, displayText: match.term, key: idx }); lastIndex = match.end; }); if (lastIndex < text.length) result.push(text.substring(lastIndex));
                return result.map((part, index) => { if (typeof part === 'string') return part; const isActive = (popup.show && popup.data && popup.data.term === part.term) || (showVocab && activeVocabTerm === part.term); return (<span key={part.key} className={`cursor-pointer border-b-2 transition-all duration-200 font-bold inline-block leading-tight ${isActive ? `text-${themeColor}-700 border-${themeColor}-500 bg-${themeColor}-100 rounded-sm px-0.5 mx-0.5` : `text-slate-900 border-dashed border-gray-400 hover:text-${themeColor}-600 hover:border-${themeColor}-400 hover:bg-${themeColor}-50`}`} onMouseEnter={(e) => handleVocabEnter(e, part)} onMouseLeave={handleVocabLeave} onClick={(e) => handleVocabClick(e, part)}>{part.displayText}</span>); });
            };

            const getSmartPosition = () => { if (!popup.show || !popup.data) return { left: 0, arrowLeft: 0 }; const POPUP_WIDTH = 288; const SCREEN_PADDING = 16; const screenW = window.innerWidth; let leftPos = popup.x - (POPUP_WIDTH / 2); if (leftPos < SCREEN_PADDING) leftPos = SCREEN_PADDING; else if (leftPos + POPUP_WIDTH > screenW - SCREEN_PADDING) leftPos = screenW - POPUP_WIDTH - SCREEN_PADDING; let arrowLeft = popup.x - leftPos; if (arrowLeft < 12) arrowLeft = 12; if (arrowLeft > POPUP_WIDTH - 12) arrowLeft = POPUP_WIDTH - 12; return { left: leftPos, arrowLeft }; };
            const { left: popupLeft, arrowLeft } = getSmartPosition();

            const getVideoClass = () => { if (layoutMode === 'script') return 'hidden'; if (layoutMode === 'video') { return `w-full h-full bg-black lg:h-full lg:aspect-auto ${showVocab ? 'xl:w-9/12 lg:w-full' : 'lg:w-full'}`; } let base = 'w-full sticky top-1 z-50 bg-black aspect-video lg:static lg:aspect-auto'; return `${base} flex-1 lg:h-full`; };
            const getScriptClass = () => { if (layoutMode === 'video') return 'hidden'; if (layoutMode === 'script') { return showVocab ? 'lg:flex-1 h-auto' : 'w-full max-w-7xl mx-auto h-auto'; } return `w-full lg:w-5/12 ${showVocab ? 'xl:w-4/12' : ''} lg:h-full`; };
            const getContainerClass = () => { if (layoutMode === 'script') return 'items-start min-h-full'; if (layoutMode === 'video') { return 'h-[calc(100vh-9rem)] lg:h-[calc(100vh-4rem)] lg:overflow-hidden flex-col lg:flex-row'; } return 'min-h-full lg:h-[calc(100vh-4rem)] lg:overflow-hidden flex-col lg:flex-row'; }
            const getInnerListStyle = () => { const baseStyle = "space-y-4 rounded-xl transition-all duration-300"; if (layoutMode === 'script') { return `${baseStyle} p-6 bg-slate-100 overflow-visible h-auto`; } else { return `${baseStyle} p-4 bg-gray-50 overflow-visible lg:overflow-y-auto flex-1`; } };

            return (
                <div className={`flex gap-4 animate-fade-in relative w-full mx-auto ${getContainerClass()}`}>
                    {popup.show && popup.data && createPortal(<div className="fixed z-[9999] bg-white rounded-xl shadow-xl border border-gray-200 p-4 w-72 animate-fade-in pointer-events-none" style={{ left: popupLeft, top: popup.y + 12 }}><div className="flex items-center justify-between mb-2"><h3 className="text-[20px] font-black text-slate-900 font-ocarina">{popup.data.term}</h3></div><p className="text-[19px] text-slate-700 font-medium mb-3 leading-snug font-diary">{popup.data.mainDef}</p>{popup.fixed && popup.data.subDefs && popup.data.subDefs.length > 0 && (<div className="space-y-1 mt-2">{popup.data.subDefs.map((sub, idx) => (<div key={idx} className={`bg-${themeColor}-50 rounded-lg p-2 border border-${themeColor}-100`}><p className={`text-[18px] text-${themeColor}-900 font-bold font-school-free`}>{sub.subTerm}</p><p className={`text-[17px] text-${themeColor}-700 font-dictation`}>{sub.subDef}</p></div>))}</div>)}<div className="absolute top-0 -translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-white border-l border-t border-gray-200 rotate-45" style={{ left: arrowLeft }}></div></div>, document.body)}
                    <div className={`bg-black rounded-xl overflow-hidden shadow-lg transition-all duration-300 relative ${getVideoClass()}`}><div id="youtube-player" className="w-full h-full"></div>{isLoading && (<div className="absolute inset-0 bg-black/90 flex items-center justify-center z-10"><div className={`animate-spin rounded-full h-12 w-12 border-4 border-t-transparent border-${themeColor}-500 opacity-80`}></div></div>)}</div>
                    <div 
                        className={`flex flex-col rounded-xl border border-gray-200 shadow-sm transition-all duration-300 bg-gray-50 ${getScriptClass()}`}
                        style={{ fontSize: `calc(${BASE_CLAMP} * ${SCALE_PAGE_LEARN_SCRIPT})` }}
                    >
                        <div className={getInnerListStyle()}>
                            {SCRIPT_DATA.map(line => {
                                const isActive = activeLine === line.id; const isScriptMode = layoutMode === 'script';
                                if (isScriptMode) {
                                    const isLeft = line.speaker === 'ìœ ë‚˜'; const bubbleBg = isActive ? 'bg-yellow-50' : 'bg-white'; const bubbleBorder = isActive ? 'border-yellow-100' : 'border-slate-200';
                                    return (
                                        <div key={line.id} ref={el => scriptRefs.current[line.id] = el} className={`flex flex-col w-full mb-6 ${isLeft ? 'items-start' : 'items-end'}`}>
                                            <div className={`text-xs font-bold text-slate-500 mb-1 px-2 ${isLeft ? 'text-left' : 'text-right'}`}>{line.speaker}</div>
                                            <div className={`relative p-5 rounded-xl border ${bubbleBg} ${bubbleBorder} ${isActive ? 'scale-[1.02] shadow-md z-10' : 'hover:shadow-md'} transition-all duration-300 max-w-[85%] sm:max-w-[70%] group`}>
                                                <div className={`absolute bottom-4 w-3 h-3 border ${bubbleBg} ${bubbleBorder} rotate-45 transform ${isLeft ? '-left-1.5 border-t-0 border-r-0' : '-right-1.5 border-b-0 border-l-0'}`}></div>
                                                <div className="relative z-10" onClick={() => handleLineClick(line.time[0])}><p className="text-[18px] sm:text-[20px] text-slate-800 leading-relaxed font-medium">{renderTextWithVocab(line.kor)}</p>{translations[line.id] && (<div className="mt-3 pt-3 border-t border-dashed border-gray-200/60 animate-fade-in"><p className="text-[16px] text-slate-500">{line.eng}</p></div>)}</div>
                                                <div className="flex justify-between items-center mt-4 pt-1"><button onClick={(e) => { e.stopPropagation(); toggleTranslation(line.id); }} className="flex items-center gap-1 text-[11px] font-bold text-slate-400 hover:text-slate-600 transition-colors p-1 rounded-lg hover:bg-gray-100/50"><TranslateIcon className="w-3.5 h-3.5" /><span>{translations[line.id] ? 'ìˆ¨ê¸°ê¸°' : 'Eng'}</span></button><button onClick={(e) => { e.stopPropagation(); handleLineClick(line.time[0]); }} className={`transition-all duration-200 hover:scale-110 ${isActive ? 'text-yellow-700' : 'text-slate-400 hover:text-slate-600'}`} title="Play this line"><PlayCircleIcon className="w-5 h-5" /></button></div>
                                            </div>
                                        </div>
                                    );
                                }
                                return (
                                    <div key={line.id} ref={el => scriptRefs.current[line.id] = el} className="flex flex-col">
                                        <div className="flex items-center gap-2 mb-1 ml-1"><span className="text-xs font-bold text-slate-600">{line.speaker}</span></div>
                                        <div onClick={() => handleLineClick(line.time[0])} className={`p-5 rounded-2xl border transition-all duration-300 cursor-pointer relative group ${isActive ? 'bg-yellow-50 border-yellow-100 shadow-md scale-[1.01]' : 'bg-white border-gray-200 hover:border-gray-300'}`}>
                                            <p className="text-[22px] text-slate-800 leading-relaxed font-medium">{renderTextWithVocab(line.kor)}</p>
                                            {translations[line.id] && (<div className="mt-3 pt-3 border-t border-dashed border-gray-200 animate-fade-in"><p className="text-[18px] text-slate-500">{line.eng}</p></div>)}
                                            <div className="flex justify-between items-center mt-4 pt-3 border-t border-dashed border-gray-100"><button onClick={(e) => { e.stopPropagation(); toggleTranslation(line.id); }} className="flex items-center gap-1 text-[11px] font-bold text-slate-400 hover:text-slate-600 transition-colors p-1 rounded-lg hover:bg-gray-100/50"><TranslateIcon className="w-3.5 h-3.5" /><span>{translations[line.id] ? 'ìˆ¨ê¸°ê¸°' : 'Eng'}</span></button><button onClick={(e) => { e.stopPropagation(); handleLineClick(line.time[0]); }} className={`transition-all duration-200 hover:scale-110 ${isActive ? 'text-yellow-700' : 'text-slate-400 hover:text-slate-600'}`} title="Play this line"><PlayCircleIcon className="w-5 h-5" /></button></div>
                                        </div>
                                    </div>
                                );
                            })}
                            <div className="h-32"></div>
                        </div>
                    </div>
                    {showVocab && (
                        <div className={`hidden xl:flex w-3/12 flex flex-col bg-white rounded-xl border border-gray-200 shadow-sm animate-fade-in ${layoutMode === 'script' ? 'sticky top-4 h-[calc(100vh-6rem)]' : 'h-full'}`}>
                            <div className="p-4 border-b border-gray-100 flex items-center gap-2 bg-white rounded-t-xl"><VocabIcon className={`w-5 h-5 text-${themeColor}-600`} /><div className="flex flex-col leading-none"><h2 className="font-bold text-slate-900 text-[14px]">í•µì‹¬ ì–´íœ˜</h2><span className="text-[10px] text-slate-400 font-medium">Key Vocabulary</span></div></div>
                            <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50">{VOCAB_DATA.map((word, idx) => (<div key={idx} ref={el => sidebarVocabRefs.current[word.term] = el} className={`p-4 rounded-xl border transition-all duration-500 ${activeVocabTerm === word.term ? `border-${themeColor}-500 bg-${themeColor}-50 ring-2 ring-${themeColor}-200 shadow-md scale-105` : 'bg-white border-gray-200 shadow-sm'}`}><div className="flex justify-between items-start mb-2"><h3 className="text-[20px] font-extrabold text-slate-900 font-ocarina">{word.term}</h3></div><p className="text-[19px] text-slate-600 mb-3 font-medium font-diary">{word.mainDef}</p>{word.subDefs && word.subDefs.length > 0 && (<div className={`space-y-2 bg-${themeColor}-50 p-2.5 rounded-lg border border-${themeColor}-100`}>{word.subDefs.map((sub, i) => (<div key={i}><p className={`text-[18px] text-${themeColor}-900 font-bold leading-snug font-school-free`}>{sub.subTerm}</p><p className={`text-[17px] text-${themeColor}-700 font-dictation`}>{sub.subDef}</p></div>))}</div>)}</div>))}</div>
                        </div>
                    )}
                </div>
            );
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('home'); const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false); const [userLevel, setUserLevel] = useState("B1"); const [autoScroll, setAutoScroll] = useState(true); const [showVocab, setShowVocab] = useState(false); const [playbackRate, setPlaybackRate] = useState(1.0); const [isSpeedMenuOpen, setIsSpeedMenuOpen] = useState(false); const [layoutMode, setLayoutMode] = useState('split'); const [progress, setProgress] = useState({ learn: false, vocab: false, quiz: 0, discuss: false }); const [videoState, setVideoState] = useState({ player: null, currentTime: 0, duration: 0, isPlaying: false });
            const themeColor = useMemo(() => getLevelTheme(userLevel), [userLevel]);
            const themeHexColors = { 'lime': '#a3e635', 'green': '#4ade80', 'sky': '#38bdf8', 'blue': '#60a5fa', 'violet': '#a78bfa', 'fuchsia': '#e879f9', 'purple': '#c084fc' };
            const currentThemeHex = themeHexColors[themeColor] || '#4ade80';
            const updateProgress = (key, value = true) => setProgress(prev => { if (prev[key] === value) return prev; return { ...prev, [key]: value }; });
            const handlePlayerReady = (player) => setVideoState(prev => ({ ...prev, player, duration: player.getDuration() }));
            const handlePlayerStateChange = (event) => setVideoState(prev => ({ ...prev, isPlaying: event.data === window.YT.PlayerState.PLAYING }));
            const handleTimeUpdate = (time) => setVideoState(prev => ({ ...prev, currentTime: time }));
            const mainPaddingClass = useMemo(() => { switch(activeTab) { case 'home': return 'p-[20px]'; case 'learn': return 'p-[2px]'; case 'vocab': return 'p-[16px]'; case 'quiz': return 'p-[4px]'; case 'discuss': return 'p-[2px]'; default: return 'p-[20px]'; } }, [activeTab]);
            const getScrollClass = () => { if (activeTab === 'learn') { if (layoutMode === 'video') return 'lg:overflow-hidden'; if (layoutMode === 'split') return 'lg:overflow-hidden'; } return ''; };
            useEffect(() => { const handleResize = () => { if (window.innerWidth < 1024) setIsSidebarCollapsed(true); else setIsSidebarCollapsed(false); }; window.addEventListener('resize', handleResize); handleResize(); return () => window.removeEventListener('resize', handleResize); }, []);
            const toggleSidebar = () => setIsSidebarCollapsed(!isSidebarCollapsed);

            const renderLearnHeaderContent = () => {
                 const modes = [ { id: 'split', labelKorDesktop: 'ë™ì˜ìƒ & ìŠ¤í¬ë¦½íŠ¸', labelKorMobile: 'ë™ì˜ìƒ & ìŠ¤í¬ë¦½íŠ¸', labelEng: 'Video & Transcript' }, { id: 'video', labelKorDesktop: 'ë™ì˜ìƒë§Œ ë³´ê¸°', labelKorMobile: 'ë™ì˜ìƒ', labelEngDesktop: 'Watch Video', labelEngMobile: 'Video' }, { id: 'script', labelKorDesktop: 'ìŠ¤í¬ë¦½íŠ¸ë§Œ ë³´ê¸°', labelKorMobile: 'ìŠ¤í¬ë¦½íŠ¸', labelEngDesktop: 'Read Transcript', labelEngMobile: 'Transcript' } ];
                const { player, currentTime, duration, isPlaying } = videoState;
                const formatTime = (seconds) => { if (isNaN(seconds)) return "00:00"; const date = new Date(seconds * 1000); const mm = date.getUTCMinutes(); const ss = date.getUTCSeconds(); return `${mm.toString().padStart(2, '0')}:${ss.toString().padStart(2, '0')}`; };
                const handleSeek = (e) => { const time = parseFloat(e.target.value); if (player) player.seekTo(time, true); setVideoState(prev => ({ ...prev, currentTime: time })); };
                const togglePlay = () => { if (player) { if (isPlaying) player.pauseVideo(); else player.playVideo(); } };
                const rewind2 = () => { if (player) player.seekTo(Math.max(0, currentTime - 1.5), true); };
                const forward2 = () => { if (player) player.seekTo(Math.min(duration, currentTime + 1.5), true); };
                const layoutBtnTextSizeKor = "text-[12px] md:text-[13px] lg:text-[14px]"; const layoutBtnTextSizeEng = "text-[8px] md:text-[9px] lg:text-[10px]"; const layoutBtnPadding = "px-2 py-1 lg:px-4 lg:py-2"; const controlBtnHeight = "h-8 md:h-[32px] lg:h-9"; const controlTextSize = "text-[10px] md:text-[11px] lg:text-[12px]"; const controlPadding = "px-3";

                return (
                    <div className="flex items-center h-full px-4 lg:px-6 border-b border-gray-100 bg-white/90 backdrop-blur gap-4">
                        <div className="flex items-center gap-2 shrink-0">{modes.map((mode, index) => { const isActive = layoutMode === mode.id; const korFontClass = isActive ? "font-cafe24-surround text-green-700" : "font-cafe24 text-slate-500"; const engFontClass = isActive ? "font-bold text-green-500" : "font-medium text-slate-400"; const containerClass = isActive ? `bg-${themeColor}-50 border border-${themeColor}-100 shadow-sm` : 'bg-transparent border border-transparent hover:bg-gray-50'; return ( <React.Fragment key={mode.id}><button onClick={() => setLayoutMode(mode.id)} className={`flex flex-col items-center justify-center rounded-xl transition-all duration-300 ${layoutBtnPadding} ${containerClass}`}><span className={`leading-tight ${layoutBtnTextSizeKor} ${korFontClass}`}><span className="hidden md:inline">{mode.labelKorDesktop}</span><span className="md:hidden">{mode.labelKorMobile}</span></span><span className={`leading-tight font-nanum-round mt-0.5 ${layoutBtnTextSizeEng} ${engFontClass}`}><span className="hidden md:inline">{mode.labelEngDesktop || mode.labelEng}</span><span className="md:hidden">{mode.labelEngMobile || mode.labelEng}</span></span></button>{index < modes.length - 1 && <div className="w-px h-3 bg-gray-300"></div>}</React.Fragment> ); })}</div>
                        <div className="flex items-center gap-2 flex-1 justify-end min-w-0">
                            <div className={`hidden sm:flex flex-1 items-center gap-1 bg-white border border-gray-200 rounded-xl p-1 shadow-sm min-w-0 transition-all ${controlBtnHeight} ${showVocab ? '' : 'max-w-[400px]'}`}>
                                <div className="hidden md:flex flex-col flex-1 px-2 justify-center w-full min-w-[60px] lg:min-w-[80px]"><input type="range" min="0" max={duration || 100} value={currentTime} onChange={handleSeek} className="w-full h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer" style={{ '--thumb-color': currentThemeHex }} /><div className="text-[8px] font-mono text-center leading-none mt-1 text-slate-400 font-bold whitespace-nowrap">{formatTime(currentTime)} / {formatTime(duration)}</div></div>
                                <button onClick={rewind2} className="p-1 hover:bg-gray-100 rounded-lg text-slate-600 transition-colors shrink-0" title="-1.5s"><RewindIcon className="w-4 h-4" /></button><button onClick={togglePlay} className={`w-5 h-5 lg:w-6 lg:h-6 flex items-center justify-center rounded-xl transition-all duration-200 hover:scale-110 bg-${themeColor}-400 text-white shadow-md shrink-0`} title={isPlaying ? "Pause" : "Play"}>{isPlaying ? <PauseIcon className="w-4 h-4 lg:w-5 lg:h-5 fill-current" /> : <PlayIconSolid className="w-4 h-4 lg:w-5 lg:h-5 fill-current" />}</button><button onClick={forward2} className="p-1 hover:bg-gray-100 rounded-lg text-slate-600 transition-colors shrink-0" title="+1.5s"><ForwardIcon className="w-4 h-4" /></button>
                            </div>
                            <div className="w-px h-3 bg-gray-300 shrink-0 hidden sm:block"></div>
                            <div className="relative shrink-0 hidden sm:block"><button onClick={() => setIsSpeedMenuOpen(!isSpeedMenuOpen)} className={`flex items-center gap-2 ${controlPadding} ${controlBtnHeight} rounded-xl border border-gray-200 bg-white hover:bg-gray-50 transition-all shadow-sm text-slate-600`}><SpeedSolidIcon className="w-4 h-4 text-slate-400" /><span className={`${controlTextSize} font-bold font-nanum-round min-w-[32px] text-center`}>{playbackRate.toFixed(2)}x</span></button>{isSpeedMenuOpen && (<><div className="fixed inset-0 z-40" onClick={() => setIsSpeedMenuOpen(false)}></div><div className="absolute top-full right-0 mt-2 bg-white border border-gray-100 rounded-xl shadow-xl p-1.5 z-50 w-24 flex flex-col gap-0.5 animate-fade-in">{[0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1.0].map(speed => (<button key={speed} onClick={() => { setPlaybackRate(speed); setIsSpeedMenuOpen(false); }} className={`text-center px-2 py-1.5 rounded-lg text-[10px] font-bold font-nanum-round transition-colors ${playbackRate === speed ? `bg-${themeColor}-50 text-${themeColor}-600` : 'text-slate-500 hover:bg-gray-50 hover:text-slate-700'}`}>{speed.toFixed(2)}x</button>))}</div></>)}</div>
                            <div className="w-px h-3 bg-gray-300 shrink-0 hidden sm:block"></div>
                            <button onClick={() => setAutoScroll(!autoScroll)} className={`hidden min-[400px]:flex items-center gap-2 ${controlPadding} ${controlBtnHeight} rounded-xl border border-gray-200 bg-white hover:bg-gray-50 transition-all shadow-sm text-slate-600 shrink-0`}><div className={`relative transition-colors duration-200 ease-in-out ${autoScroll ? `bg-${themeColor}-400` : 'bg-gray-300'} w-6 h-2 md:w-7 md:h-3 lg:w-8 lg:h-4 rounded-full`}><div className={`absolute top-0.5 bg-white rounded-full shadow-sm transition-transform duration-200 left-0.5 w-1 h-1 md:w-2 md:h-2 lg:w-3 lg:h-3 ${autoScroll ? 'translate-x-4' : 'translate-x-0'}`}></div></div><span className={`${controlTextSize} font-bold font-nanum-round`}>Auto Scroll</span></button>
                            <div className="w-px h-3 bg-gray-300 hidden xl:block shrink-0"></div>
                            <button onClick={() => setShowVocab(!showVocab)} className={`hidden xl:flex items-center gap-2 ${controlPadding} ${controlBtnHeight} rounded-xl border transition-all shadow-sm shrink-0 ${showVocab ? `bg-${themeColor}-50 border-${themeColor}-200 text-${themeColor}-700` : 'bg-white border-gray-200 text-slate-600 hover:bg-gray-50'}`}><OpenBookSolidIcon className="w-4 h-4" /><span className={`${controlTextSize} font-bold font-nanum-round hidden sm:inline`}>Vocabulary</span></button>
                        </div>
                    </div>
                );
            };

            const renderHomeHeaderContent = () => {
                return (
                    <div className="flex lg:hidden items-center gap-3 px-4 h-full border-b border-gray-100 bg-white/90 backdrop-blur"><img src="https://raw.githubusercontent.com/openkoreanlearninglab/hub/refs/heads/main/OpenKoreanLearningLab_Logo.jpeg" alt="Logo" className="w-[48px] h-[48px] rounded-2xl shadow-lg object-cover transition-all duration-300"/><div className="flex flex-col justify-center animate-fade-in"><span className="font-cafe24-deco text-[20px] text-black leading-tight">Open</span><span className={`font-mustache text-[11px] leading-tight text-${themeColor}-600 font-bold`}>KoreanLearningLab</span></div></div>
                );
            };

            const renderContent = () => {
                switch(activeTab) {
                    case 'home': return <HomeView setActiveTab={setActiveTab} progress={progress} userLevel={userLevel} themeColor={themeColor} />;
                    case 'learn': return <LearnView updateProgress={updateProgress} themeColor={themeColor} autoScroll={autoScroll} showVocab={showVocab} playbackRate={playbackRate} layoutMode={layoutMode} onPlayerReady={handlePlayerReady} onPlayerStateChange={handlePlayerStateChange} onTimeUpdate={handleTimeUpdate} />;
                    case 'vocab': return <VocabView updateProgress={updateProgress} themeColor={themeColor} />;
                    case 'quiz': return <QuizView updateProgress={updateProgress} themeColor={themeColor} />;
                    case 'discuss': return <DiscussView updateProgress={updateProgress} themeColor={themeColor} />;
                    default: return <HomeView setActiveTab={setActiveTab} progress={progress} userLevel={userLevel} themeColor={themeColor} />;
                }
            };

            const getHeaderClass = () => {
                const base = `h-16 bg-white transition-all duration-300 ${isSidebarCollapsed ? 'lg:left-[88px]' : 'lg:left-[295px]'}`;
                if (activeTab === 'learn' && layoutMode === 'script') { return `${base} sticky top-0 z-40`; }
                return `${base} relative lg:sticky lg:top-0 z-40`;
            };

            const headerScale = activeTab === 'learn' ? SCALE_HEADER_LEARN : SCALE_HEADER_DEFAULT;
            const headerFontSize = `calc(${BASE_CLAMP} * ${headerScale})`;
            
            const mainMarginLeft = isSidebarCollapsed ? 'lg:ml-[88px]' : 'lg:ml-[295px]';

            return (
                <div className="flex min-h-screen bg-[#f9fafb]">
                    <Sidebar activeTab={activeTab} setActiveTab={setActiveTab} isCollapsed={isSidebarCollapsed} toggleSidebar={toggleSidebar} userLevel={userLevel} themeColor={themeColor} />
                    <div className={`flex-1 flex flex-col transition-all duration-300 ease-in-out ${mainMarginLeft}`}>
                        <header className={getHeaderClass()} style={{ fontSize: headerFontSize }}>{activeTab === 'learn' ? renderLearnHeaderContent() : (activeTab === 'home' ? renderHomeHeaderContent() : null)}</header>
                        <main className={`flex-1 ${mainPaddingClass} flex flex-col ${getScrollClass()}`}>{renderContent()}</main>
                    </div>
                    <nav className="lg:hidden fixed bottom-0 w-full bg-white border-t border-gray-200 flex justify-around p-3 z-50">{['home','learn','vocab','quiz','discuss'].map(t=><button key={t} onClick={()=>setActiveTab(t)} className={`p-2 rounded-lg ${activeTab===t ? `text-${themeColor}-600 bg-${themeColor}-50` : 'text-slate-400'}`}>{t==='home'?<HomeIcon className="w-6 h-6"/>:t==='learn'?<LearnIcon className="w-6 h-6"/>:t==='vocab'?<VocabIcon className="w-6 h-6"/>:t==='quiz'?<QuizIcon className="w-6 h-6"/>:<DiscussIcon className="w-6 h-6"/>}</button>)}</nav>
                </div>
            );
        };
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
